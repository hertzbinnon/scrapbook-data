<!DOCTYPE html>
<html lang="zh">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

        <meta charset="UTF-8">
        
        <title>使用 Dockerfile 定制镜像 · Docker —— 从入门到实践</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        <meta name="author" content="yeasy">
        
        
    
    

    
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
            
                
                
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://yeasy.gitbooks.io/docker_practice/content/gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    
    <link rel="next" href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/">
    
    
    <link rel="prev" href="https://yeasy.gitbooks.io/docker_practice/content/image/commit.html">
    

    
    

    

    <link rel="stylesheet" type="text/css" id="SL_Style" href="chrome://imtranslator/content/css/translator.css">
<link media="all" href="index.css" type="text/css" rel="stylesheet">
</head>
<body>
        
<div class="book without-animation with-summary font-size-2 font-family-1">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input placeholder="輸入並搜尋" value="" type="text">
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://www.gitbook.com/book/yeasy/docker_practice" target="_top" class="custom-link">Docker —— 从入门到实践</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/">
            
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../revision.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/revision.html">
            
                    
                    修订记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../contribute.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/contribute.html">
            
                    
                    如何贡献
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../introduction/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/introduction/">
            
                    
                    Docker 简介
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../introduction/what.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/introduction/what.html">
            
                    
                    什么是 Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../introduction/why.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/introduction/why.html">
            
                    
                    为什么要用 Docker
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../basic_concept/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/basic_concept/">
            
                    
                    基本概念
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../basic_concept/image.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/basic_concept/image.html">
            
                    
                    镜像
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../basic_concept/container.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/basic_concept/container.html">
            
                    
                    容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../basic_concept/repository.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/basic_concept/repository.html">
            
                    
                    仓库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../install/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/install/">
            
                    
                    安装 Docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../install/ubuntu.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/install/ubuntu.html">
            
                    
                    Ubuntu、Debian
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../install/centos.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/install/centos.html">
            
                    
                    CentOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../install/mac.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/install/mac.html">
            
                    
                    macOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../install/mirror.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/install/mirror.html">
            
                    
                    镜像加速器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="./">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/">
            
                    
                    使用镜像
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="pull.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/pull.html">
            
                    
                    获取镜像
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="list.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/list.html">
            
                    
                    列出镜像
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="commit.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/commit.html">
            
                    
                    利用 commit 理解镜像构成
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.4" data-path="build.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/build.html">
            
                    
                    使用 Dockerfile 定制镜像
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="dockerfile/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/">
            
                    
                    Dockerfile 指令详解
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.5.1" data-path="dockerfile/copy.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/copy.html">
            
                    
                    COPY 复制文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.2" data-path="dockerfile/add.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/add.html">
            
                    
                    ADD 更高级的复制文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.3" data-path="dockerfile/cmd.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/cmd.html">
            
                    
                    CMD 容器启动命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.4" data-path="dockerfile/entrypoint.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/entrypoint.html">
            
                    
                    ENTRYPOINT 入口点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.5" data-path="dockerfile/env.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/env.html">
            
                    
                    ENV 设置环境变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.6" data-path="dockerfile/arg.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/arg.html">
            
                    
                    ARG 构建参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.7" data-path="dockerfile/volume.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/volume.html">
            
                    
                    VOLUME 定义匿名卷
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.8" data-path="dockerfile/expose.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/expose.html">
            
                    
                    EXPOSE 暴露端口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.9" data-path="dockerfile/workdir.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/workdir.html">
            
                    
                    WORKDIR 指定工作目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.10" data-path="dockerfile/user.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/user.html">
            
                    
                    USER 指定当前用户
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.11" data-path="dockerfile/healthcheck.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/healthcheck.html">
            
                    
                    HEALTHCHECK 健康检查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.12" data-path="dockerfile/onbuild.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/onbuild.html">
            
                    
                    ONBUILD 为他人作嫁衣裳
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5.13" data-path="dockerfile/references.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/references.html">
            
                    
                    参考文档
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="other.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/other.html">
            
                    
                    其它制作镜像的方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="rmi.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/rmi.html">
            
                    
                    删除本地镜像
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="internal.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/internal.html">
            
                    
                    实现原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../container/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/container/">
            
                    
                    操作容器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../container/run.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/container/run.html">
            
                    
                    启动
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../container/daemon.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/container/daemon.html">
            
                    
                    守护态运行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../container/stop.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/container/stop.html">
            
                    
                    终止
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../container/enter.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/container/enter.html">
            
                    
                    进入容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../container/import_export.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/container/import_export.html">
            
                    
                    导出和导入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../container/rm.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/container/rm.html">
            
                    
                    删除
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../repository/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/repository/">
            
                    
                    访问仓库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../repository/dockerhub.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/repository/dockerhub.html">
            
                    
                    Docker Hub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../repository/local_repo.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/repository/local_repo.html">
            
                    
                    私有仓库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../repository/config.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/repository/config.html">
            
                    
                    配置文件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../data_management/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/data_management/">
            
                    
                    数据管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../data_management/volume.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/data_management/volume.html">
            
                    
                    数据卷
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../data_management/container.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/data_management/container.html">
            
                    
                    数据卷容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../data_management/management.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/data_management/management.html">
            
                    
                    备份、恢复、迁移数据卷
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../network/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/network/">
            
                    
                    使用网络
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../network/port_mapping.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/network/port_mapping.html">
            
                    
                    外部访问容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../network/linking.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/network/linking.html">
            
                    
                    容器互联
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../advanced_network/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/">
            
                    
                    高级网络配置
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../advanced_network/quick_guide.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/quick_guide.html">
            
                    
                    快速配置指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../advanced_network/dns.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/dns.html">
            
                    
                    配置 DNS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../advanced_network/access_control.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/access_control.html">
            
                    
                    容器访问控制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../advanced_network/port_mapping.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/port_mapping.html">
            
                    
                    端口映射实现
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../advanced_network/docker0.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/docker0.html">
            
                    
                    配置 docker0 网桥
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../advanced_network/bridge.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/bridge.html">
            
                    
                    自定义网桥
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../advanced_network/example.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/example.html">
            
                    
                    工具和示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../advanced_network/config_file.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/config_file.html">
            
                    
                    编辑网络配置文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.9" data-path="../advanced_network/ptp.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/advanced_network/ptp.html">
            
                    
                    实例：创建一个点到点连接
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../security/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/security/">
            
                    
                    安全
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../security/kernel_ns.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/security/kernel_ns.html">
            
                    
                    内核命名空间
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../security/control_group.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/security/control_group.html">
            
                    
                    控制组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../security/daemon_sec.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/security/daemon_sec.html">
            
                    
                    服务端防护
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../security/kernel_capability.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/security/kernel_capability.html">
            
                    
                    内核能力机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../security/other_feature.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/security/other_feature.html">
            
                    
                    其它安全特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.6" data-path="../security/summary.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/security/summary.html">
            
                    
                    总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../underly/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/underly/">
            
                    
                    底层实现
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../underly/arch.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/underly/arch.html">
            
                    
                    基本架构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="../underly/namespace.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/underly/namespace.html">
            
                    
                    命名空间
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="../underly/cgroups.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/underly/cgroups.html">
            
                    
                    控制组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.4" data-path="../underly/ufs.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/underly/ufs.html">
            
                    
                    联合文件系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.5" data-path="../underly/container_format.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/underly/container_format.html">
            
                    
                    容器格式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.6" data-path="../underly/network.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/underly/network.html">
            
                    
                    网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../compose/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/">
            
                    
                    Docker 三剑客之 Compose 项目
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../compose/intro.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/intro.html">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../compose/install.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/install.html">
            
                    
                    安装与卸载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="../compose/usage.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/usage.html">
            
                    
                    使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="../compose/commands.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/commands.html">
            
                    
                    命令说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="../compose/yaml_file.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/yaml_file.html">
            
                    
                    YAML 模板文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="../compose/django.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/django.html">
            
                    
                    实战 Django
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="../compose/rails.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/rails.html">
            
                    
                    实战 Rails
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="../compose/wordpress.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/compose/wordpress.html">
            
                    
                    实战 wordpress
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../machine/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/machine/">
            
                    
                    Docker 三剑客之  Machine 项目
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../machine/intro.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/machine/intro.html">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="../machine/install.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/machine/install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="../machine/usage.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/machine/usage.html">
            
                    
                    使用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../swarm/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm/">
            
                    
                    Docker 三剑客之 Docker Swarm
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="../swarm/intro.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm/intro.html">
            
                    
                    Swarm 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="../swarm/install.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm/install.html">
            
                    
                    安装 Swarm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="../swarm/usage.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm/usage.html">
            
                    
                    使用 Swarm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="../swarm/servicebackend.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm/servicebackend.html">
            
                    
                    使用其它服务发现后端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.5" data-path="../swarm/scheduling.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm/scheduling.html">
            
                    
                    Swarm 中的调度器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="../swarm/filter.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm/filter.html">
            
                    
                    Swarm 中的过滤器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="../swarm/summary.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm/summary.html">
            
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../etcd/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/etcd/">
            
                    
                    Etcd 项目
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="../etcd/intro.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/etcd/intro.html">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="../etcd/install.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/etcd/install.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="../etcd/etcdctl.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/etcd/etcdctl.html">
            
                    
                    使用 etcdctl
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../coreos/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/coreos/">
            
                    
                    CoreOS 项目
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="../coreos/intro.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/coreos/intro.html">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="../coreos/intro_tools.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/coreos/intro_tools.html">
            
                    
                    工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3" data-path="../coreos/quickstart.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/coreos/quickstart.html">
            
                    
                    快速搭建CoreOS集群
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="../kubernetes/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/kubernetes/">
            
                    
                    Kubernetes 项目
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.20.1" data-path="../kubernetes/intro.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/kubernetes/intro.html">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2" data-path="../kubernetes/quickstart.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/kubernetes/quickstart.html">
            
                    
                    快速上手
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.3" data-path="../kubernetes/concepts.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/kubernetes/concepts.html">
            
                    
                    基本概念
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.4" data-path="../kubernetes/kubectl.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/kubernetes/kubectl.html">
            
                    
                    kubectl 使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.5" data-path="../kubernetes/design.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/kubernetes/design.html">
            
                    
                    架构设计
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="../mesos/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/mesos/">
            
                    
                    Mesos - 优秀的集群资源调度平台
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.21.1" data-path="../mesos/intro.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/mesos/intro.html">
            
                    
                    Mesos 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.2" data-path="../mesos/installation.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/mesos/installation.html">
            
                    
                    安装与使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.3" data-path="../mesos/architecture.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/mesos/architecture.html">
            
                    
                    原理与架构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.4" data-path="../mesos/configuration.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/mesos/configuration.html">
            
                    
                    Mesos 配置项解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.5" data-path="../mesos/monitor.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/mesos/monitor.html">
            
                    
                    日志与监控
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.6" data-path="../mesos/framework.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/mesos/framework.html">
            
                    
                    常见应用框架
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21.7" data-path="../mesos/summary.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/mesos/summary.html">
            
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="../cloud/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cloud/">
            
                    
                    容器与云计算
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.22.1" data-path="../cloud/intro.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cloud/intro.html">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.2" data-path="../cloud/aws.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cloud/aws.html">
            
                    
                    亚马逊云
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.3" data-path="../cloud/qcloud.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cloud/qcloud.html">
            
                    
                    腾讯云
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.4" data-path="../cloud/alicloud.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cloud/alicloud.html">
            
                    
                    阿里云
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22.5" data-path="../cloud/summary.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cloud/summary.html">
            
                    
                    小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="../cases/os/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cases/os/">
            
                    
                    实战案例-操作系统
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.23.1" data-path="../cases/os/busybox.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cases/os/busybox.html">
            
                    
                    Busybox
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.2" data-path="../cases/os/alpine.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cases/os/alpine.html">
            
                    
                    Alpine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.3" data-path="../cases/os/debian.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cases/os/debian.html">
            
                    
                    Debian\/Ubuntu
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.4" data-path="../cases/os/centos.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cases/os/centos.html">
            
                    
                    CentOS\/Fedora
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.5" data-path="../cases/os/coreos.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cases/os/coreos.html">
            
                    
                    CoreOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23.6" data-path="../cases/os/summary.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/cases/os/summary.html">
            
                    
                    本章小结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="../appendix/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/">
            
                    
                    附录
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.24.1" data-path="../appendix/faq/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/faq/">
            
                    
                    附录一：常见问题总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2" data-path="../appendix/repo/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/">
            
                    
                    附录二：热门镜像介绍
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.24.2.1" data-path="../appendix/repo/ubuntu.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/ubuntu.html">
            
                    
                    Ubuntu
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2.2" data-path="../appendix/repo/centos.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/centos.html">
            
                    
                    CentOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2.3" data-path="../appendix/repo/mysql.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/mysql.html">
            
                    
                    MySQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2.4" data-path="../appendix/repo/mongodb.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/mongodb.html">
            
                    
                    MongoDB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2.5" data-path="../appendix/repo/redis.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/redis.html">
            
                    
                    Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2.6" data-path="../appendix/repo/nginx.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/nginx.html">
            
                    
                    Nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2.7" data-path="../appendix/repo/wordpress.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/wordpress.html">
            
                    
                    WordPress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.2.8" data-path="../appendix/repo/nodejs.html">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/repo/nodejs.html">
            
                    
                    Node.js
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.24.3" data-path="../appendix/command/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/command/">
            
                    
                    附录三：Docker 命令查询
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24.4" data-path="../appendix/resources/">
            
                <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/resources/">
            
                    
                    附录四：资源链接
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com/" target="blank" class="gitbook-link">
            本書使用 GitBook 釋出
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <a class="btn pull-left js-toolbar-action" aria-label="" href="#"><i class="fa fa-align-justify"></i></a><div class="dropdown pull-right js-toolbar-action"><a class="btn toggle-dropdown" aria-label="Share" href="#"><i class="fa fa-share-alt"></i></a><div class="dropdown-menu dropdown-left"><div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div><div class="buttons"><button class="button size-5 ">Facebook</button><button class="button size-5 ">Google+</button><button class="button size-5 ">Twitter</button><button class="button size-5 ">Weibo</button><button class="button size-5 ">Instapaper</button></div></div></div><a class="btn pull-right js-toolbar-action" aria-label="" href="#"><i class="fa fa-facebook"></i></a><a class="btn pull-right js-toolbar-action" aria-label="" href="#"><i class="fa fa-twitter"></i></a><div class="dropdown pull-left font-settings js-toolbar-action"><a class="btn toggle-dropdown" aria-label="Font Settings" href="#"><i class="fa fa-font"></i></a><div class="dropdown-menu dropdown-right"><div class="dropdown-caret"><span class="caret-outer"></span><span class="caret-inner"></span></div><div class="buttons"><button class="button size-2 font-reduce">A</button><button class="button size-2 font-enlarge">A</button></div><div class="buttons"><button class="button size-2 ">Serif</button><button class="button size-2 ">Sans</button></div><div class="buttons"><button class="button size-3 ">White</button><button class="button size-3 ">Sepia</button><button class="button size-3 ">Night</button></div></div></div><a class="btn pull-right hidden-mobile" aria-label="github">
        <iframe style="display: inline-block; vertical-align: middle;" src="index_1.html" scrolling="0" width="100px" height="20px" frameborder="0"></iframe>
        </a><a class="btn pull-right hidden-mobile" aria-label="github">
        <iframe style="display: inline-block; vertical-align: middle;" src="index_2.html" scrolling="0" width="100px" height="20px" frameborder="0"></iframe>
        </a><h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="https://yeasy.gitbooks.io/docker_practice/content/">使用 Dockerfile 定制镜像</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div class="treeview__container"><div class="treeview__container-title"><span class="treeview__main-title">Treeview</span><span class="treeview__copyright">Copyright © yeasy all right reserved, powered by <a href="https://github.com/aleen42" target="_top">aleen42</a></span></div><ul>
<li><div><a href="#使用-dockerfile-定制镜像">使用 Dockerfile 定制镜像</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute('state');var nextState = curState === 'opened' ? 'hidden' : 'opened';this.setAttribute('state', nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === 'hidden') {    list.style.display = 'none';} else {    list.style.display = 'block';}"></i></div>
<ul>
<li><div><a href="#from-指定基础镜像">FROM 指定基础镜像</a><i></i></div></li>
<li><div><a href="#run-执行命令">RUN 执行命令</a><i></i></div></li>
<li><div><a href="#构建镜像">构建镜像</a><i></i></div></li>
<li><div><a href="#镜像构建上下文（context）">镜像构建上下文（Context）</a><i></i></div></li>
<li><div><a href="#其它-docker-build-的用法">其它 docker build 的用法</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute('state');var nextState = curState === 'opened' ? 'hidden' : 'opened';this.setAttribute('state', nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === 'hidden') {    list.style.display = 'none';} else {    list.style.display = 'block';}"></i></div>
<ul>
<li><div><a href="#直接用-git-repo-进行构建">直接用 Git repo 进行构建</a><i></i></div></li>
<li><div><a href="#用给定的-tar-压缩包构建">用给定的 tar 压缩包构建</a><i></i></div></li>
<li><div><a href="#从标准输入中读取-dockerfile-进行构建">从标准输入中读取 Dockerfile 进行构建</a><i></i></div></li>
<li><div><a href="#从标准输入中读取上下文压缩包进行构建">从标准输入中读取上下文压缩包进行构建</a><i></i></div></li>
</ul></li>
</ul></li>
</ul>
</div>

<h2 id="使用-dockerfile-定制镜像">使用 Dockerfile 定制镜像</h2>
<p>从刚才的 <code>docker commit</code> 的学习中，我们可以了解到，镜像的定制实际上就是定制每一层所添加的配置、文件。如果我们可以把每一层修改、安装、构建、操作的命令都写入一个脚本，用这个脚本来构建、定制镜像，那么之前提及的无法重复的问题、镜像构建透明性的问题、体积的问题就都会解决。这个脚本就是 Dockerfile。</p>
<p>Dockerfile 是一个文本文件，其内包含了一条条的<strong>指令(Instruction)</strong>，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。</p>
<p>还以之前定制 <code>nginx</code> 镜像为例，这次我们使用 Dockerfile 来定制。</p>
<p>在一个空白目录中，建立一个文本文件，并命名为 <code>Dockerfile</code>：</p>
<pre><code class="lang-bash">$ mkdir mynginx
$ <span class="hljs-built_in">cd</span> mynginx
$ touch Dockerfile
</code></pre>
<p>其内容为：</p>
<pre><code class="lang-Dockerfile"><span class="hljs-keyword">FROM</span> nginx
<span class="hljs-keyword">RUN</span> <span class="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; /usr/share/nginx/html/index.html
</span></code></pre>
<p>这个 Dockerfile 很简单，一共就两行。涉及到了两条指令，<code>FROM</code> 和 <code>RUN</code>。</p>
<h3 id="from-指定基础镜像">FROM 指定基础镜像</h3>
<p>所谓定制镜像，那一定是以一个镜像为基础，在其上进行定制。就像我们之前运行了一个 <code>nginx</code> 镜像的容器，再进行修改一样，基础镜像是必须指定的。而 <code>FROM</code> 就是指定<strong>基础镜像</strong>，因此一个 <code>Dockerfile</code> 中 <code>FROM</code> 是必备的指令，并且必须是第一条指令。</p>
<p>在 <a href="https://hub.docker.com/explore/" target="_top">Docker Hub</a><sup><a href="#fn_1" id="reffn_1">1</a></sup> 上有非常多的高质量的官方镜像，
有可以直接拿来使用的服务类的镜像，如 <a href="https://hub.docker.com/_/nginx/" target="_top"><code>nginx</code></a>、<a href="https://hub.docker.com/_/redis/" target="_top"><code>redis</code></a>、<a href="https://hub.docker.com/_/mongo/" target="_top"><code>mongo</code></a>、<a href="https://hub.docker.com/_/mysql/" target="_top"><code>mysql</code></a>、<a href="https://hub.docker.com/_/httpd/" target="_top"><code>httpd</code></a>、<a href="https://hub.docker.com/_/php/" target="_top"><code>php</code></a>、<a href="https://hub.docker.com/_/tomcat/" target="_top"><code>tomcat</code></a> 等；
也有一些方便开发、构建、运行各种语言应用的镜像，如 <a href="https://hub.docker.com/_/node/" target="_top"><code>node</code></a>、<a href="https://hub.docker.com/_/openjdk/" target="_top"><code>openjdk</code></a>、<a href="https://hub.docker.com/_/python/" target="_top"><code>python</code></a>、<a href="https://hub.docker.com/_/ruby/" target="_top"><code>ruby</code></a>、<a href="https://hub.docker.com/_/golang/" target="_top"><code>golang</code></a> 等。
可以在其中寻找一个最符合我们最终目标的镜像为基础镜像进行定制。
如果没有找到对应服务的镜像，官方镜像中还提供了一些更为基础的操作系统镜像，如 <a href="https://hub.docker.com/_/ubuntu/" target="_top"><code>ubuntu</code></a>、<a href="https://hub.docker.com/_/debian/" target="_top"><code>debian</code></a>、<a href="https://hub.docker.com/_/centos/" target="_top"><code>centos</code></a>、<a href="https://hub.docker.com/_/fedora/" target="_top"><code>fedora</code></a>、<a href="https://hub.docker.com/_/alpine/" target="_top"><code>alpine</code></a> 等，这些操作系统的软件库为我们提供了更广阔的扩展空间。</p>
<p>除了选择现有镜像为基础镜像外，Docker 还存在一个特殊的镜像，名为 <code>scratch</code>。这个镜像是虚拟的概念，并不实际存在，它表示一个空白的镜像。</p>
<pre><code class="lang-Dockerfile"><span class="hljs-keyword">FROM</span> scratch
...
</code></pre>
<p>如果你以 <code>scratch</code> 为基础镜像的话，意味着你不以任何镜像为基础，接下来所写的指令将作为镜像第一层开始存在。</p>
<p>不以任何系统为基础，直接将可执行文件复制进镜像的做法并不罕见，比如 <a href="https://hub.docker.com/_/swarm/" target="_top"><code>swarm</code></a>、<a href="https://quay.io/repository/coreos/etcd" target="_top"><code>coreos/etcd</code></a>。对于 Linux 下静态编译的程序来说，并不需要有操作系统提供运行时支持，所需的一切库都已经在可执行文件里了，因此直接 <code>FROM scratch</code> 会让镜像体积更加小巧。使用 <a href="https://golang.org/" target="_top">Go 语言</a> 开发的应用很多会使用这种方式来制作镜像，这也是为什么有人认为 Go 是特别适合容器微服务架构的语言的原因之一。</p>
<h3 id="run-执行命令">RUN 执行命令</h3>
<p><code>RUN</code> 指令是用来执行命令行命令的。由于命令行的强大能力，<code>RUN</code> 指令在定制镜像时是最常用的指令之一。其格式有两种：</p>
<ul>
<li><em>shell</em> 格式：<code>RUN &lt;命令&gt;</code>，就像直接在命令行中输入的命令一样。刚才写的 Dockrfile 中的 <code>RUN</code> 指令就是这种格式。</li>
</ul>
<pre><code class="lang-Dockerfile"><span class="hljs-keyword">RUN</span> <span class="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; /usr/share/nginx/html/index.html
</span></code></pre>
<ul>
<li><em>exec</em> 格式：<code>RUN ["可执行文件", "参数1", "参数2"]</code>，这更像是函数调用中的格式。</li>
</ul>
<p>既然 <code>RUN</code> 就像 Shell 脚本一样可以执行命令，那么我们是否就可以像 Shell 脚本一样把每个命令对应一个 RUN 呢？比如这样：</p>
<pre><code class="lang-Dockerfile"><span class="hljs-keyword">FROM</span> debian:jessie

<span class="hljs-keyword">RUN</span> <span class="bash">apt-get update
</span><span class="hljs-keyword">RUN</span> <span class="bash">apt-get install -y gcc libc6-dev make
</span><span class="hljs-keyword">RUN</span> <span class="bash">wget -O redis.tar.gz <span class="hljs-string">"http://download.redis.io/releases/redis-3.2.5.tar.gz"</span>
</span><span class="hljs-keyword">RUN</span> <span class="bash">mkdir -p /usr/src/redis
</span><span class="hljs-keyword">RUN</span> <span class="bash">tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1
</span><span class="hljs-keyword">RUN</span> <span class="bash">make -C /usr/src/redis
</span><span class="hljs-keyword">RUN</span> <span class="bash">make -C /usr/src/redis install
</span></code></pre>
<p>之前说过，Dockerfile 中每一个指令都会建立一层，<code>RUN</code> 也不例外。每一个 <code>RUN</code> 的行为，就和刚才我们手工建立镜像的过程一样：新建立一层，在其上执行这些命令，执行结束后，<code>commit</code> 这一层的修改，构成新的镜像。</p>
<p>而上面的这种写法，创建了 7 层镜像。这是完全没有意义的，而且很多运行时不需要的东西，都被装进了镜像里，比如编译环境、更新的软件包等等。结果就是产生非常臃肿、非常多层的镜像，不仅仅增加了构建部署的时间，也很容易出错。
这是很多初学 Docker 的人常犯的一个错误。</p>
<p><em>Union FS 是有最大层数限制的，比如 AUFS，曾经是最大不得超过 42 层，现在是不得超过 127 层。</em></p>
<p>上面的 <code>Dockerfile</code> 正确的写法应该是这样：</p>
<pre><code class="lang-Dockerfile"><span class="hljs-keyword">FROM</span> debian:jessie

<span class="hljs-keyword">RUN</span> <span class="bash">buildDeps=<span class="hljs-string">'gcc libc6-dev make'</span> \
    &amp;&amp; apt-get update \
    &amp;&amp; apt-get install -y <span class="hljs-variable">$buildDeps</span> \
    &amp;&amp; wget -O redis.tar.gz <span class="hljs-string">"http://download.redis.io/releases/redis-3.2.5.tar.gz"</span> \
    &amp;&amp; mkdir -p /usr/src/redis \
    &amp;&amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \
    &amp;&amp; make -C /usr/src/redis \
    &amp;&amp; make -C /usr/src/redis install \
    &amp;&amp; rm -rf /var/lib/apt/lists/* \
    &amp;&amp; rm redis.tar.gz \
    &amp;&amp; rm -r /usr/src/redis \
    &amp;&amp; apt-get purge -y --auto-remove <span class="hljs-variable">$buildDeps</span>
</span></code></pre>
<p>首先，之前所有的命令只有一个目的，就是编译、安装 redis 可执行文件。因此没有必要建立很多层，这只是一层的事情。因此，这里没有使用很多个 <code>RUN</code> 对一一对应不同的命令，而是仅仅使用一个 <code>RUN</code> 指令，并使用 <code>&amp;&amp;</code> 将各个所需命令串联起来。将之前的 7 层，简化为了 1 层。在撰写 Dockerfile 的时候，要经常提醒自己，这并不是在写 Shell 脚本，而是在定义每一层该如何构建。</p>
<p>并且，这里为了格式化还进行了换行。Dockerfile 支持 Shell 类的行尾添加 <code>\</code> 的命令换行方式，以及行首 <code>#</code> 进行注释的格式。良好的格式，比如换行、缩进、注释等，会让维护、排障更为容易，这是一个比较好的习惯。</p>
<p>此外，还可以看到这一组命令的最后添加了清理工作的命令，删除了为了编译构建所需要的软件，清理了所有下载、展开的文件，并且还清理了 <code>apt</code> 缓存文件。这是很重要的一步，我们之前说过，镜像是多层存储，每一层的东西并不会在下一层被删除，会一直跟随着镜像。因此镜像构建时，一定要确保每一层只添加真正需要添加的东西，任何无关的东西都应该清理掉。</p>
<p>很多人初学 Docker 制作出了很臃肿的镜像的原因之一，就是忘记了每一层构建的最后一定要清理掉无关文件。</p>
<h3 id="构建镜像">构建镜像</h3>
<p>好了，让我们再回到之前定制的 nginx 镜像的 Dockerfile 来。现在我们明白了这个 Dockerfile 的内容，那么让我们来构建这个镜像吧。</p>
<p>在 <code>Dockerfile</code> 文件所在目录执行：</p>
<pre><code class="lang-bash">$ docker build -t nginx:v3 .
Sending build context to Docker daemon 2.048 kB
Step 1 : FROM nginx
 ---&gt; e43d811ce2f4
Step 2 : RUN <span class="hljs-built_in">echo</span> <span class="hljs-string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; /usr/share/nginx/html/index.html
 ---&gt; Running <span class="hljs-keyword">in</span> 9cdc27646c7b
 ---&gt; 44aa4490ce2c
Removing intermediate container 9cdc27646c7b
Successfully built 44aa4490ce2c
</code></pre>
<p>从命令的输出结果中，我们可以清晰的看到镜像的构建过程。在 <code>Step 2</code> 中，如同我们之前所说的那样，<code>RUN</code> 指令启动了一个容器 <code>9cdc27646c7b</code>，执行了所要求的命令，并最后提交了这一层 <code>44aa4490ce2c</code>，随后删除了所用到的这个容器 <code>9cdc27646c7b</code>。</p>
<p>这里我们使用了 <code>docker build</code> 命令进行镜像构建。其格式为：</p>
<pre><code class="lang-bash">docker build [选项] &lt;上下文路径/URL/-&gt;
</code></pre>
<p>在这里我们指定了最终镜像的名称 <code>-t nginx:v3</code>，构建成功后，我们可以像之前运行 <code>nginx:v2</code> 那样来运行这个镜像，其结果会和 <code>nginx:v2</code> 一样。</p>
<h3 id="镜像构建上下文（context）">镜像构建上下文（Context）</h3>
<p>如果注意，会看到 <code>docker build</code> 命令最后有一个 <code>.</code>。<code>.</code> 表示当前目录，而 <code>Dockerfile</code> 就在当前目录，因此不少初学者以为这个路径是在指定 <code>Dockerfile</code> 所在路径，这么理解其实是不准确的。如果对应上面的命令格式，你可能会发现，这是在指定<strong>上下文路径</strong>。那么什么是上下文呢？</p>
<p>首先我们要理解 <code>docker build</code> 的工作原理。Docker 在运行时分为 Docker 引擎（也就是服务端守护进程）和客户端工具。Docker 的引擎提供了一组 REST API，被称为 <a href="https://docs.docker.com/engine/reference/api/docker_remote_api/" target="_top">Docker Remote API</a>，而如 <code>docker</code> 命令这样的客户端工具，则是通过这组 API 与 Docker 引擎交互，从而完成各种功能。因此，虽然表面上我们好像是在本机执行各种 <code>docker</code> 功能，但实际上，一切都是使用的远程调用形式在服务端（Docker 引擎）完成。也因为这种 C/S 设计，让我们操作远程服务器的 Docker 引擎变得轻而易举。</p>
<p>当我们进行镜像构建的时候，并非所有定制都会通过 <code>RUN</code> 指令完成，经常会需要将一些本地文件复制进镜像，比如通过 <code>COPY</code> 指令、<code>ADD</code> 指令等。而 <code>docker build</code> 命令构建镜像，其实并非在本地构建，而是在服务端，也就是 Docker 引擎中构建的。那么在这种客户端/服务端的架构中，如何才能让服务端获得本地文件呢？</p>
<p>这就引入了上下文的概念。当构建的时候，用户会指定构建镜像上下文的路径，<code>docker build</code> 命令得知这个路径后，会将路径下的所有内容打包，然后上传给 Docker 引擎。这样 Docker 引擎收到这个上下文包后，展开就会获得构建镜像所需的一切文件。</p>
<p>如果在 <code>Dockerfile</code> 中这么写：</p>
<pre><code class="lang-Dockerfile"><span class="hljs-keyword">COPY</span> <span class="bash">./package.json /app/
</span></code></pre>
<p>这并不是要复制执行 <code>docker build</code> 命令所在的目录下的 <code>package.json</code>，也不是复制 <code>Dockerfile</code> 所在目录下的 <code>package.json</code>，而是复制 <strong>上下文（context）</strong> 目录下的 <code>package.json</code>。</p>
<p>因此，<code>COPY</code> 这类指令中的源文件的路径都是<em>相对路径</em>。这也是初学者经常会问的为什么 <code>COPY ../package.json /app</code> 或者 <code>COPY /opt/xxxx /app</code> 无法工作的原因，因为这些路径已经超出了上下文的范围，Docker 引擎无法获得这些位置的文件。如果真的需要那些文件，应该将它们复制到上下文目录中去。</p>
<p>现在就可以理解刚才的命令 <code>docker build -t nginx:v3 .</code> 中的这个 <code>.</code>，实际上是在指定上下文的目录，<code>docker build</code> 命令会将该目录下的内容打包交给 Docker 引擎以帮助构建镜像。</p>
<p>如果观察 <code>docker build</code> 输出，我们其实已经看到了这个发送上下文的过程：</p>
<pre><code class="lang-bash">$ docker build -t nginx:v3 .
Sending build context to Docker daemon 2.048 kB
...
</code></pre>
<p>理解构建上下文对于镜像构建是很重要的，避免犯一些不应该的错误。比如有些初学者在发现 <code>COPY /opt/xxxx /app</code> 不工作后，于是干脆将 <code>Dockerfile</code> 放到了硬盘根目录去构建，结果发现 <code>docker build</code> 执行后，在发送一个几十 GB 的东西，极为缓慢而且很容易构建失败。那是因为这种做法是在让 <code>docker build</code> 打包整个硬盘，这显然是使用错误。</p>
<p>一般来说，应该会将 <code>Dockerfile</code> 置于一个空目录下，或者项目根目录下。如果该目录下没有所需文件，那么应该把所需文件复制一份过来。如果目录下有些东西确实不希望构建时传给 Docker 引擎，那么可以用 <code>.gitignore</code> 一样的语法写一个 <code>.dockerignore</code>，该文件是用于剔除不需要作为上下文传递给 Docker 引擎的。</p>
<p>那么为什么会有人误以为 <code>.</code> 是指定 <code>Dockerfile</code> 所在目录呢？这是因为在默认情况下，如果不额外指定 <code>Dockerfile</code> 的话，会将上下文目录下的名为 <code>Dockerfile</code> 的文件作为 Dockerfile。</p>
<p>这只是默认行为，实际上 <code>Dockerfile</code> 的文件名并不要求必须为 <code>Dockerfile</code>，而且并不要求必须位于上下文目录中，比如可以用 <code>-f ../Dockerfile.php</code> 参数指定某个文件作为 <code>Dockerfile</code>。</p>
<p>当然，一般大家习惯性的会使用默认的文件名 <code>Dockerfile</code>，以及会将其置于镜像构建上下文目录中。</p>
<h3 id="其它-docker-build-的用法">其它 <code>docker build</code> 的用法</h3>
<h4 id="直接用-git-repo-进行构建">直接用 Git repo 进行构建</h4>
<p>或许你已经注意到了，<code>docker build</code> 还支持从 URL 构建，比如可以直接从 Git repo 中构建：</p>
<pre><code class="lang-bash">$ docker build https://github.com/twang2218/gitlab-ce-zh.git<span class="hljs-comment">#:8.14</span>
docker build https://github.com/twang2218/gitlab-ce-zh.git\<span class="hljs-comment">#:8.14</span>
Sending build context to Docker daemon 2.048 kB
Step 1 : FROM gitlab/gitlab-ce:8.14.0-ce.0
8.14.0-ce.0: Pulling from gitlab/gitlab-ce
aed15891ba52: Already exists
773ae8583d14: Already exists
...
</code></pre>
<p>这行命令指定了构建所需的 Git repo，并且指定默认的 <code>master</code> 分支，构建目录为 <code>/8.14/</code>，然后 Docker 就会自己去 <code>git clone</code> 这个项目、切换到指定分支、并进入到指定目录后开始构建。</p>
<h4 id="用给定的-tar-压缩包构建">用给定的 tar 压缩包构建</h4>
<pre><code class="lang-bash">$ docker build http://server/context.tar.gz
</code></pre>
<p>如果所给出的 URL 不是个 Git repo，而是个 <code>tar</code> 压缩包，那么 Docker 引擎会下载这个包，并自动解压缩，以其作为上下文，开始构建。</p>
<h4 id="从标准输入中读取-dockerfile-进行构建">从标准输入中读取 Dockerfile 进行构建</h4>
<pre><code class="lang-bash">docker build - &lt; Dockerfile
</code></pre>
<p>或</p>
<pre><code class="lang-bash">cat Dockerfile | docker build -
</code></pre>
<p>如果标准输入传入的是文本文件，则将其视为 <code>Dockerfile</code>，并开始构建。这种形式由于直接从标准输入中读取 Dockerfile 的内容，它没有上下文，因此不可以像其他方法那样可以将本地文件 <code>COPY</code> 进镜像之类的事情。</p>
<h4 id="从标准输入中读取上下文压缩包进行构建">从标准输入中读取上下文压缩包进行构建</h4>
<pre><code class="lang-bash">$ docker build - &lt; context.tar.gz
</code></pre>
<p>如果发现标准输入的文件格式是 <code>gzip</code>、<code>bzip2</code> 以及 <code>xz</code> 的话，将会使其为上下文压缩包，直接将其展开，将里面视为上下文，并开始构建。</p>
<blockquote id="fn_1">
<sup>1</sup>. <a href="https://store.docker.com/" target="_top">Docker Store</a>是发现公共Docker内容，镜像发布和发行软件的新地方<a href="#reffn_1" title="Jump back to footnote [1] in the text."> ↩</a>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/commit.html" class="navigation navigation-prev " aria-label="Previous page: 利用 commit 理解镜像构成">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/" class="navigation navigation-next " aria-label="Next page: Dockerfile 指令详解" style="margin-right: 0px;">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    
</div>

        
    
    
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    

    
<div></div>



<div id="SL_balloon_obj" style="display: none;"><div id="SL_button" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%; display: block; width: 24px; height: 24px; position: absolute; cursor: pointer;"></div><div id="SL_shadow_translation_result2" style="display: none;"></div><div id="SL_shadow_translator"><div id="SL_providers"><div class="SL_BL_LABLE_ON" title="Google" id="SL_P0">G</div><div class="SL_BL_LABLE_ON" title="Microsoft" id="SL_P1">M</div><div class="SL_BL_LABLE_ON" title="Translator" id="SL_P2">T</div></div><div id="SL_planshet" style="background: rgb(244, 245, 245) url('undefined') repeat scroll 0% 0%;"><div id="SL_arrow_up"></div><div id="SL_TB"><div id="bubblelogo" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%; display: block; width: 24px; height: 24px; position: absolute;"></div><table id="SL_tables"><tr><td width="10%" align="right"><input id="SLloc" title="鎖定語言" type="checkbox"></td><td width="20%" align="left"><select id="SL_lng_from"><option value="auto">檢測語言</option><option value="sq">阿尔巴尼亚语</option><option value="ar">阿拉伯语</option><option value="az">阿塞拜疆语</option><option value="ga">爱尔兰语</option><option value="et">爱沙尼亚语</option><option value="eu">巴斯克语</option><option value="be">白俄罗斯语</option><option value="bg">保加利亚语</option><option value="is">冰岛语</option><option value="pl">波兰语</option><option value="bs">波斯尼亚语</option><option value="fa">波斯语</option><option value="af">布尔语(南非荷兰语)</option><option value="da">丹麦语</option><option value="de">德语</option><option value="ru">俄语</option><option value="fr">法语</option><option value="tl">菲律宾语</option><option value="fi">芬兰语</option><option value="km">高棉语</option><option value="ka">格鲁吉亚语</option><option value="gu">古吉拉特语</option><option value="kk">哈萨克语</option><option value="ht">海地克里奥尔语</option><option value="ko">韩语</option><option value="ha">豪萨语</option><option value="nl">荷兰语</option><option value="gl">加利西亚语</option><option value="ca">加泰罗尼亚语</option><option value="cs">捷克语</option><option value="kn">卡纳达语</option><option value="hr">克罗地亚语</option><option value="la">拉丁语</option><option value="lv">拉脱维亚语</option><option value="lo">老挝语</option><option value="lt">立陶宛语</option><option value="ro">罗马尼亚语</option><option value="mg">马尔加什语</option><option value="mt">马耳他语</option><option value="mr">马拉地语</option><option value="ml">马拉雅拉姆语</option><option value="ms">马来语</option><option value="mk">马其顿语</option><option value="mi">毛利语</option><option value="mn">蒙古语</option><option value="bn">孟加拉语</option><option value="my">缅甸语</option><option value="hmn">苗语</option><option value="zu">南非祖鲁语</option><option value="ne">尼泊尔语</option><option value="no">挪威语</option><option value="pa">旁遮普语</option><option value="pt">葡萄牙语</option><option value="ny">齐切瓦语</option><option value="ja">日语</option><option value="sv">瑞典语</option><option value="sr">塞尔维亚语</option><option value="st">塞索托语</option><option value="si">僧伽罗语</option><option value="eo">世界语</option><option value="sk">斯洛伐克语</option><option value="sl">斯洛文尼亚语</option><option value="sw">斯瓦希里语</option><option value="ceb">宿务语</option><option value="so">索马里语</option><option value="tg">塔吉克语</option><option value="te">泰卢固语</option><option value="ta">泰米尔语</option><option value="th">泰语</option><option value="tr">土耳其语</option><option value="cy">威尔士语</option><option value="ur">乌尔都语</option><option value="uk">乌克兰语</option><option value="uz">乌兹别克语</option><option value="iw">希伯来语</option><option value="el">希腊语</option><option value="es">西班牙语</option><option value="hu">匈牙利语</option><option value="hy">亚美尼亚语</option><option value="ig">伊博语</option><option value="it">意大利语</option><option value="yi">意第绪语</option><option value="hi">印地语</option><option value="su">印尼巽他语</option><option value="id">印尼语</option><option value="jw">印尼爪哇语</option><option value="en">英语</option><option value="yo">约鲁巴语</option><option value="vi">越南语</option><option value="zh-CN">中文简体</option><option value="zh-TW">中文繁体</option></select></td><td width="5%" align="center"><div id="SL_switch_b" title="切換語言" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%; display: block; width: 10px; height: 10px; cursor: pointer;" align="center"></div></td><td width="20%" align="left"><select id="SL_lng_to"><option value="sq">阿尔巴尼亚语</option><option value="ar">阿拉伯语</option><option value="az">阿塞拜疆语</option><option value="ga">爱尔兰语</option><option value="et">爱沙尼亚语</option><option value="eu">巴斯克语</option><option value="be">白俄罗斯语</option><option value="bg">保加利亚语</option><option value="is">冰岛语</option><option value="pl">波兰语</option><option value="bs">波斯尼亚语</option><option value="fa">波斯语</option><option value="af">布尔语(南非荷兰语)</option><option value="da">丹麦语</option><option value="de">德语</option><option value="ru">俄语</option><option value="fr">法语</option><option value="tl">菲律宾语</option><option value="fi">芬兰语</option><option value="km">高棉语</option><option value="ka">格鲁吉亚语</option><option value="gu">古吉拉特语</option><option value="kk">哈萨克语</option><option value="ht">海地克里奥尔语</option><option value="ko">韩语</option><option value="ha">豪萨语</option><option value="nl">荷兰语</option><option value="gl">加利西亚语</option><option value="ca">加泰罗尼亚语</option><option value="cs">捷克语</option><option value="kn">卡纳达语</option><option value="hr">克罗地亚语</option><option value="la">拉丁语</option><option value="lv">拉脱维亚语</option><option value="lo">老挝语</option><option value="lt">立陶宛语</option><option value="ro">罗马尼亚语</option><option value="mg">马尔加什语</option><option value="mt">马耳他语</option><option value="mr">马拉地语</option><option value="ml">马拉雅拉姆语</option><option value="ms">马来语</option><option value="mk">马其顿语</option><option value="mi">毛利语</option><option value="mn">蒙古语</option><option value="bn">孟加拉语</option><option value="my">缅甸语</option><option value="hmn">苗语</option><option value="zu">南非祖鲁语</option><option value="ne">尼泊尔语</option><option value="no">挪威语</option><option value="pa">旁遮普语</option><option value="pt">葡萄牙语</option><option value="ny">齐切瓦语</option><option value="ja">日语</option><option value="sv">瑞典语</option><option value="sr">塞尔维亚语</option><option value="st">塞索托语</option><option value="si">僧伽罗语</option><option value="eo">世界语</option><option value="sk">斯洛伐克语</option><option value="sl">斯洛文尼亚语</option><option value="sw">斯瓦希里语</option><option value="ceb">宿务语</option><option value="so">索马里语</option><option value="tg">塔吉克语</option><option value="te">泰卢固语</option><option value="ta">泰米尔语</option><option value="th">泰语</option><option value="tr">土耳其语</option><option value="cy">威尔士语</option><option value="ur">乌尔都语</option><option value="uk">乌克兰语</option><option value="uz">乌兹别克语</option><option value="iw">希伯来语</option><option value="el">希腊语</option><option value="es">西班牙语</option><option value="hu">匈牙利语</option><option value="hy">亚美尼亚语</option><option value="ig">伊博语</option><option value="it">意大利语</option><option value="yi">意第绪语</option><option value="hi">印地语</option><option value="su">印尼巽他语</option><option value="id">印尼语</option><option value="jw">印尼爪哇语</option><option value="en">英语</option><option value="yo">约鲁巴语</option><option value="vi">越南语</option><option value="zh-CN">中文简体</option><option value="zh-TW">中文繁体</option></select></td><td width="5%" align="center"> </td><td width="6%" align="center"><div id="SL_TTS_voice" title="聆聽" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%;"></div></td><td width="6%" align="center"><div id="SL_copy" title="複製譯文" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%;"></div></td><td width="6%" align="center"><div id="SL_bbl_font_patch" title="此功能在字典中禁用"></div><div id="SL_bbl_font" title="字體大小" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%;"></div></td><td width="6%" align="center"><div id="SL_TH" title="翻譯歷史" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%;"></div></td><td width="10%"></td><td width="6%" align="right"><div id="SL_pin" title="固定彈出窗口" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%; display: block; width: 16px; height: 16px; cursor: pointer;"></div></td></tr></table></div><div id="SL_alert_bbl"><div id="SLHKclose"></div><div id="SL_alert_cont"></div></div></div><div id="SL_shadow_translation_result" style="background: rgb(255, 255, 255) url('undefined') repeat scroll 0% 0%;"></div><div id="SL_loading" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%; display: block; position: absolute; width: 35px; margin-left: 180px; margin-top: -40px; height: 35px;"></div><div id="SL_player2"></div><div id="SL_alert100">語言功能限200個字符</div><div id="SL_Balloon_options" style="background: rgb(255, 255, 255) none repeat scroll 0% 0%;"><div id="SL_arrow_down"></div><table width="100%"><tr><td width="18%" height="16" align="left"><div id="SL_bbl_donate" title="進行一點捐款" style="background: rgba(0, 0, 0, 0) url('undefined') repeat scroll 0% 0%;"></div></td><td width="68%" align="center"><a href="#" id="OPlnk" title="顯示選項">選項</a> : <a href="#" id="HISTlnk" title="翻譯歷史">歷史</a> : <a href="http://about.imtranslator.net/tutorials/presentations/imtranslator-translator-for-firefox/popup-bubble-application/" target="_top" id="HELPlnk" title="幫助">幫助</a> : <a href="#" id="FBlnk" title="反饋">反饋</a></td><td width="15%" align="right"><a id="SL_Balloon_Close" href="#" title="關閉">關閉</a></td></tr></table></div></div></div></body>
</html>
