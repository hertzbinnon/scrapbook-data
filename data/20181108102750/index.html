<!DOCTYPE html>
<html xmlns:cc="http://creativecommons.org/ns#">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=contain"><title>Dynamic optimizer — a perceptual video encoding optimization framework</title><link rel="canonical" href="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f"><meta name="title" content="Dynamic optimizer — a perceptual video encoding optimization framework"><meta name="referrer" content="unsafe-url"><meta name="description" content="Video encoding has fueled academic research over the past 25 years and enabled compelling products and services. Many companies are built around video encoding and transmission — Netflix and Google’s…"><meta name="theme-color" content="#000000"><meta property="og:title" content="Dynamic optimizer — a perceptual video encoding optimization framework"><meta property="twitter:title" content="Dynamic optimizer — a perceptual video encoding optimization framework"><meta property="og:url" content="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/0*5dpM9ZgG0LiQUmoy."><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="By Ioannis Katsavounidis, Sr. Research Scientist, Video Algorithms"><meta name="twitter:description" content="By Ioannis Katsavounidis, Sr. Research Scientist, Video Algorithms"><meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/1200/0*5dpM9ZgG0LiQUmoy."><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@NetflixTechBlog"><meta property="author" content="Netflix Technology Blog"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta property="article:publisher" content="https://www.facebook.com/medium"><meta property="article:author" content="https://medium.com/@NetflixTechBlog"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2018-03-05T17:01:02.048Z"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="16 min read"><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/e19f1e3a277f"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/e19f1e3a277f"><meta property="al:android:url" content="medium://p/e19f1e3a277f"><meta property="al:web:url" content="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="https://medium.com/osd.xml"><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/e19f1e3a277f"><meta name="parsely-link" content="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f"><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="favicon-rebrand-medium.3y6xpz-0fsdwdnpm3hsbia.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/304/304/1*ty4NvNrGg4ReETxqU2N3Og.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/240/240/1*ty4NvNrGg4ReETxqU2N3Og.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/152/152/1*ty4NvNrGg4ReETxqU2N3Og.png"><link rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/120/120/1*ty4NvNrGg4ReETxqU2N3Og.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717">
<link media="all" href="index.css" type="text/css" rel="stylesheet">
</head>
<body itemscope="" class=" postShowScreen browser-firefox os-windows is-withMagicUnderlinesv-glyph v-glyph--m2 is-js"><div class="site-main" id="container"><div class="butterBar butterBar--error"></div><div class="surface"><div id="prerendered" class="screenContent"><canvas class="canvas-renderer"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"></div><div class="metabar u-clearfix js-metabar u-textColorTransparentWhiteDarker u-fixed u-backgroundTransparentWhiteDarkest u-xs-sizeFullViewportWidth u-tintBgColor u-tintSpectrum"><div class="branch-journeys-top"></div><div class="js-metabarMiddle metabar-inner u-marginAuto u-maxWidth1032 u-flexCenter u-justifyContentSpaceBetween u-height65 u-xs-height56 u-paddingHorizontal20"><div class="metabar-block u-flex1  u-flexCenter"><div class="js-metabarLogoLeft"><a href="https://medium.com/" data-log-event="home" class="siteNav-logo u-flexCenter u-paddingTop0"><span class="svgIcon svgIcon--logoMonogram svgIcon--45px is-flushLeft u-flexCenter u-paddingTop0"><svg class="svgIcon-use" width="45" height="45"><path d="M5 40V5h35v35H5zm8.56-12.627c0 .555-.027.687-.318 1.03l-2.457 2.985v.396h6.974v-.396l-2.456-2.985c-.291-.343-.344-.502-.344-1.03V18.42l6.127 13.364h.714l5.256-13.364v10.644c0 .29 0 .342-.185.528l-1.848 1.796v.396h9.19v-.396l-1.822-1.796c-.184-.186-.21-.238-.21-.528V15.937c0-.291.026-.344.21-.528l1.823-1.797v-.396h-6.471l-4.622 11.542-5.203-11.542h-6.79v.396l2.14 2.64c.239.292.291.37.291.768v10.353z"></path></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="u-flexCenter u-height65 u-xs-height56"><span class="u-inlineBlock u-height28 u-xs-height24 u-verticalAlignTop u-marginRight20 u-marginLeft15 u-borderRightTransparentWhiteLighter"></span></div><div class="u-flexCenter u-height65 u-xs-height56 u-marginRight18"><a class="js-collectionLogoOrName u-uiTextBold u-fontSize18 u-lineHeightTightest u-xs-fontSize22" href="https://medium.com/netflix-techblog?source=logo-lo_bSDRfAqMuMTU---2615bd06b42e"><img class="u-paddingTop5" src="1+xmfuqcai93eqrkvcayvstw.png" alt="Netflix TechBlog" width="147" height="36"></a></div><div class="u-flexCenter u-height65 u-xs-height56 u-xs-hide"><div class="buttonSet"><button class="button button--primary button--smallest u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton is-smallPill" data-action="sign-up-prompt" data-sign-in-action="toggle-follow-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/netflix-techblog" data-action-source="----2615bd06b42e----------------------follow_header" data-collection-id="2615bd06b42e"><span class="button-label  js-buttonLabel">Follow</span></button></div></div></div><div class="metabar-block u-flex0 u-flexCenter"><div class="u-flexCenter u-height65 u-xs-height56"><div class="buttonSet buttonSet--wide u-lineHeightInherit"><a class="button button--primary button--light button--chromeless u-accentColor--buttonNormal is-inSiteNavBar u-xs-hide js-signInButton" href="https://medium.com/m/signin?redirect=https%3A%2F%2Fmedium.com%2Fnetflix-techblog%2Fdynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f&amp;source=--------------------------nav_reg&amp;operation=login" data-action="sign-in-prompt" data-redirect="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f" data-action-source="--------------------------nav_reg">Sign in</a><a class="button button--primary button--light button--withChrome u-accentColor--buttonNormal is-inSiteNavBar js-signUpButton" href="https://medium.com/m/signin?redirect=https%3A%2F%2Fmedium.com%2Fnetflix-techblog%2Fdynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f&amp;source=--------------------------nav_reg&amp;operation=register" data-action="sign-up-prompt" data-redirect="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f" data-action-source="--------------------------nav_reg">Get started</a></div></div></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-tintBgColor u-height65 u-xs-height56"></div><main role="main"><article class=" u-minHeight100vhOffset65 u-overflowHidden postArticle postArticle--full is-withAccentColors u-marginBottom40" lang="en"><header class="container u-maxWidth740"><div class="uiScale uiScale-ui--regular uiScale-caption--regular postMetaHeader u-paddingBottom10 row"><div class="col u-size12of12 js-postMetaLockup"><div class="uiScale uiScale-ui--regular uiScale-caption--regular postMetaLockup postMetaLockup--authorLockupForPost u-flexCenter js-postMetaLockup"><div class="u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@NetflixTechBlog?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="c3aeaf49d8a4" data-action-type="hover" data-user-id="c3aeaf49d8a4" dir="auto"><img src="1+ty4nvnrgg4reetxqu2n3og.png" class="avatar-image avatar-image--small" alt="Go to the profile of Netflix Technology Blog"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><div class="u-lineHeightTightest"><a class="ds-link ds-link--styleSubtle ui-captionStrong u-inlineBlock link link--darken link--darker" href="https://medium.com/@NetflixTechBlog?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="c3aeaf49d8a4" data-action-type="hover" data-user-id="c3aeaf49d8a4" dir="auto">Netflix Technology Blog</a><span class="followState js-followState" data-user-id="c3aeaf49d8a4"><button class="button button--smallest u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-xs-hide" data-action="sign-up-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-redirect="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--smallest u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-marginLeft10 u-xs-hide" data-action="sign-up-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/c3aeaf49d8a4" data-action-source="post_header_lockup-c3aeaf49d8a4-------------------------follow_byline"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="ui-caption ui-xs-clamp2 postMetaInline">Learn more about how Netflix designs, builds, and operates our systems and engineering organizations</div><div class="ui-caption postMetaInline js-testPostMetaInlineSupplemental"><time datetime="2018-03-05T17:01:02.048Z">Mar 5</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="16 min read"></span></div></div></div></div></div></header><div class="postArticle-content js-postField js-notesSource js-trackedPost" data-post-id="e19f1e3a277f" data-source="post_page" data-collection-id="2615bd06b42e" data-tracking-context="postPage"><section name="d0b0" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="f572" id="f572" class="graf graf--h3 graf--leading graf--title">Dynamic optimizer — a perceptual video encoding optimization framework</h1><h2 name="8248" id="8248" class="graf graf--h4 graf-after--h3 graf--trailing graf--subtitle"><em class="markup--em markup--h4-em">By Ioannis Katsavounidis, Sr. Research Scientist, Video Algorithms</em></h2></div></div></section><section name="5e06" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="7013" id="7013" class="graf graf--h3 graf--leading">Motivation</h3><p name="ae38" id="ae38" class="graf graf--p graf--hasDropCapModel graf--hasDropCap graf-after--h3"><span class="graf-dropCap">V</span>ideo encoding has fueled academic research over the past 25 years and enabled compelling products and services. Many companies are built around video encoding and transmission — Netflix and Google’s YouTube are two prime examples of video-centric companies. The fundamentals of video encoding haven’t changed for all these years, as modern video streams are produced with the same type of encoding parameters that have been used since MPEG-1 [<a href="#1846" data-href="#1846" class="markup--anchor markup--p-anchor">1</a>]: a certain frame resolution is chosen, together with a group-of-pictures (GOP) structure that imposes periodic Intra pictures, and a target bitrate that is (approximately) met by either a single-pass or two-passes over the input video frames.</p><p name="49d0" id="49d0" class="graf graf--p graf-after--p">Companies have struggled to fine-tune additional parameters in video codecs, creating what is commonly referred to in the industry as a good “recipe”. These recipes have been typically created and customized by human inspection of resulting encodes on a selected set of a few titles and have been kept fixed for a very long time.</p><p name="4a8d" id="4a8d" class="graf graf--p graf-after--p">At the same time, improvements in core video codec tools have led to spectacular reduction in bitrate savings — one can achieve the same quality with an HEVC [<a href="#cf4f" data-href="#cf4f" class="markup--anchor markup--p-anchor">2</a>] encoder, while using just a fraction (about 30%) of the bits required by MPEG-1. This improvement, although, which has always been measured using mean-squared-error (MSE), wasn’t always accompanied by equally impressive results, when encodes were evaluated by human observers. The magic number to claim when a new codec was being developed has been “50%”. H264/AVC [<a href="#6d1a" data-href="#6d1a" class="markup--anchor markup--p-anchor">3</a>] claimed 50% less bits than MPEG-2 [<a href="#8836" data-href="#8836" class="markup--anchor markup--p-anchor">4</a>] and HEVC claimed 50% less bits than AVC. Yet, in practical systems, these savings never quite materialized — the best estimates on what benefits one sees from an incremental change in video codecs is closer to 40% [<a href="#d0f2" data-href="#d0f2" class="markup--anchor markup--p-anchor">5</a>].</p><p name="f94a" id="f94a" class="graf graf--p graf-after--p">Parallel to the standardization efforts at ISO and ITU, Google has been developing their own family of royalty-free video codecs; its latest addition was VP9 [<a href="#698b" data-href="#698b" class="markup--anchor markup--p-anchor">6</a>], first introduced in 2013 and finalized in 2014. VP9 built on the earlier success of VP8 and the line of “True Motion” codecs developed by On2 Technologies, acquired by Google in 2010.</p><p name="a391" id="a391" class="graf graf--p graf-after--p">Keeping in mind that most of the video codec improvements carried a very heavy computational overhead on both decoding and — mainly — encoding complexity, one already understands that the newer and more efficient codecs required an ever increasing complexity in order to be deployed in a commercial video transmission service. One typically sees a factor between 5–10 in encoder complexity increase with each generation of video codecs — while the corresponding increase in decoding complexity is typically by a factor of 2.</p><p name="8187" id="8187" class="graf graf--p graf-after--p">If one accepts the increased complexity that comes with newer and more efficient codecs, a bigger question is: what can we do at the system level, for example, in the way we connect video frames as input to an encoder or how we use the output of a video decoder to render it on a screen, to further improve the video quality as perceived by human observers who consume all these hours of video today?</p><p name="d96e" id="d96e" class="graf graf--p graf-after--p">The keywords in this new approach, presented here, are the following:</p><ul class="postList"><li name="ed7c" id="ed7c" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Perceptual</strong>: the whole purpose of video encoding is to compress visual information in a way that makes it pleasing to the human eye; Mean-squared-error (MSE), typically used for encoder decisions, is a number that doesn’t always correlate very nicely with human perception.</li><li name="8a70" id="8a70" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Complexity</strong>: just like we spend an increasing amount of complexity within a video codec, we can afford to spend some outside of it, as well.</li><li name="8abd" id="8abd" class="graf graf--li graf-after--li graf--trailing"><strong class="markup--strong markup--li-strong">Look-ahead</strong>: unlike broadcast TV, where one is forced to make encoding decisions on-the-fly or with minimal delay, in video-on-demand services, video sequences are available in their entirety and can thus be pre-analyzed multiple times to improve quality.</li></ul></div></div></section><section name="5a30" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f84a" id="f84a" class="graf graf--h3 graf--leading">Shot-based encoding</h3><p name="0f00" id="0f00" class="graf graf--p graf-after--h3">For the remainder of this tech blog, we assume the reader is familiar with the basics of adaptive streaming, such as</p><ul class="postList"><li name="f852" id="f852" class="graf graf--li graf-after--p">Multiple coded representations of the same visual content in different resolutions and/or qualities, using a basic unit of processing, referred to as “streaming segment”</li><li name="8d9f" id="8d9f" class="graf graf--li graf-after--li">Delivery of encoded segments from a server, as requested by a streaming client, that belong to different representations in order to accommodate varying channel conditions (bitstream switching)</li><li name="646a" id="646a" class="graf graf--li graf-after--li">Temporal alignment of segments among different coded representations of the same visual content to allow bitstream switching</li></ul><p name="1ba1" id="1ba1" class="graf graf--p graf-after--li">Interested readers can refer to a number of available adaptive streaming tutorials, such as <a href="https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming" data-href="https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">this Wiki page</a> [<a href="#f324" data-href="#f324" class="markup--anchor markup--p-anchor">7</a>].</p><h4 name="1395" id="1395" class="graf graf--h4 graf-after--p">Chunked encoding</h4><p name="cafa" id="cafa" class="graf graf--p graf-after--h4">In a previous Netflix tech-blog [<a href="http://techblog.netflix.com/2015/12/high-quality-video-encoding-at-scale.html" data-href="http://techblog.netflix.com/2015/12/high-quality-video-encoding-at-scale.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">8</a>], published in Dec. 2015, we described how encoding on the cloud benefits greatly from “chunked” encoding. This translates into breaking a long video sequence, e.g. of 1 hour duration, in multiple chunks, each of a certain duration — for example, 20 chunks, each 3 min. long. We then perform encoding of each chunk independently with a certain encoding recipe, concatenate or “assemble” the encodes and thus obtain an encoded version of the entire video sequence.</p><p name="1673" id="1673" class="graf graf--p graf-after--p">Among the advantages of chunked encoding, the most important is that it allows for a robust system to be built on the cloud using software video encoding. If and when cloud instances fail to complete a certain encode, it requires re-processing the corresponding chunk only, instead of restarting an entire hour-long video encode. One can also see the reduction in end-to-end delay, since different chunks can be encoded in parallel; thus achieving almost infinite scalability in the overall encoding system.</p><p name="6962" id="6962" class="graf graf--p graf-after--p">There are some penalties that come with chunked encoding — namely the fact that a video encoder operating over the full hour-long sequence, especially in two-pass mode, can preview what is following and therefore do better long-term bitrate allocation; thus achieving better overall quality at the same bitrate. Yet, the advantages that come from chunked encoding outweigh these penalties.</p><h4 name="4d7e" id="4d7e" class="graf graf--h4 graf-after--p">Per-title and per-chunk encode optimization</h4><p name="73f3" id="73f3" class="graf graf--p graf-after--h4">At Netflix, we have been constantly improving video quality for our members all over the world. One major milestone in our continuous efforts has been “Per-title encode optimization”, described in great detail in our techblog, posted in Dec. 2015 [<a href="https://techblog.netflix.com/2015/12/per-title-encode-optimization.html" data-href="https://techblog.netflix.com/2015/12/per-title-encode-optimization.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">9</a>]. Per-title encode optimization introduced the concept of customizing encoding according to complexity, which translates to proper resolution and bitrate selection for each video sequence we have in our catalog. This provided significant improvement over our previous fixed resolution/bitrate ladder generation, by taking into account the characteristics of video — amount of motion, level of detail, colorfulness — and optimizing coding efficiency by selecting encoding parameters that better fit each title. Another important milestone has been “per-chunk encode optimization”, introduced in Dec. 2016 as part of our “Mobile encodes for downloads” initiative, explained in more detail in <a href="http://techblog.netflix.com/2016/12/more-efficient-mobile-encodes-for.html" data-href="http://techblog.netflix.com/2016/12/more-efficient-mobile-encodes-for.html" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_top">this</a> Netflix tech blog [<a href="#2c28" data-href="#2c28" class="markup--anchor markup--p-anchor">10</a>]. The concept of equalizing rate-distortion slopes, discussed in more detail in a subsequent section, was also used in that work and provided significant improvements. In fact, one can consider the current work a natural extension of the “Per-title encode optimization” and “Per-chunk encode optimization”; we can call it “Perceptual per-shot encode optimization”.</p><h4 name="8d09" id="8d09" class="graf graf--h4 graf-after--p">From chunks to&nbsp;shots</h4><p name="a08d" id="a08d" class="graf graf--p graf-after--h4">In an ideal world, one would like to chunk a video and impose different sets of parameters to each chunk, in a way to optimize the final assembled video. The first step in achieving this perfect bit allocation is to split video in its natural atoms, consisting of frames that are very similar to each other and thus behave similarly to changes to encoding parameters — these are the “shots” that make up a long video sequence. Shots are portions of video with a relatively short duration, coming from the same camera under fairly constant lighting and environment conditions. It captures the same or similar visual content, for example, the face of an actor standing in front of a tree and — most important — it is uniform in its behavior when changing coding parameters. The natural boundaries of shots are established by relatively simple algorithms, called shot-change detection algorithms, which check the amount of differences between pixels that belong to consecutive frames, as well as other statistics. When that amount of difference exceeds certain fixed or dynamically adapted threshold, a new shot boundary is announced.</p><p name="0bf8" id="0bf8" class="graf graf--p graf-after--p">There are cases, such as cross-fades or other visual effects that can be applied on the boundary between two consecutive shots, which can be dealt with by more sophisticated algorithms.</p><p name="3245" id="3245" class="graf graf--p graf-after--p">The end result of a shot-change detection algorithm is a list of shots and their timestamps. One can use the resulting shots as the basic encoding block, instead of a fixed-length chunk. That provides for a few really unique opportunities:</p><ol class="postList"><li name="07ea" id="07ea" class="graf graf--li graf-after--p">The placement of Intra frames can now be “consistently irregular”, a term that means <strong class="markup--strong markup--li-strong">(a)</strong> Intra frames can be placed in a “random” place, for example the first 4 Intra frames can be at times 0, 2, 5, 7 secs. and (<strong class="markup--strong markup--li-strong">b</strong>) Yet, temporal positions are always aligned among encodes of the same title, in order words, the location of the first 4 Intra frames remains at 0, 2, 5, 7 secs. for <strong class="markup--strong markup--li-strong">all</strong> encodes of this title.</li><li name="141b" id="141b" class="graf graf--li graf-after--li">The irregular placement of Intra frames results in minimum coding overhead; keep in mind that Intra frames are the least efficient among the 3 different types (I/P/B) used in video coding, and thus one wishes to minimize their presence in an encoded video.</li><li name="bd23" id="bd23" class="graf graf--li graf-after--li">Seeking in a long video sequence now leads to natural points of interest, which are signaled by shot boundaries.</li><li name="bf18" id="bf18" class="graf graf--li graf-after--li">There is no prediction penalty when encoding shots independently: if one instead places an Intra frame in the middle of a shot, this breaks the shot into parts that, when coded independently instead of a single unit, require more bits, since pixels after the Intra frame can’t reference their similar counterparts in frames before the Intra frame.</li><li name="7bfb" id="7bfb" class="graf graf--li graf-after--li">Any significant encoding parameter change between consecutive shots is much less likely to be noticed by the human eye, since the disruption incurred by the different visual content in different shots is far more disruptive to human visual system than any possible encoding parameter — such as resolution/quality — change.</li><li name="bddb" id="bddb" class="graf graf--li graf-after--li">Within a homogeneous set of frames, such as those that belong to the same shot, there is much less need to use rate-control, since very simple coding schemes, such as the fixed-quantization parameter (“fixed QP”) mode, supported by virtually all existing video encoders, offers a very consistent video quality, with almost minimal bitrate variation. In fact, “fixed QP” has always been used during development of video codecs, since almost all sequences used for testing in MPEG, ITU and other standards bodies, consist of single-shot video chunks.</li></ol><figure name="1af3" id="1af3" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 378px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 54.1%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*Lvp7E1TA8J6FG4mH." data-width="1600" data-height="865" data-action="zoom" data-action-value="0*Lvp7E1TA8J6FG4mH."><img src="0+lvp7e1ta8j6fg4mh." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*Lvp7E1TA8J6FG4mH."></div></div><figcaption class="imageCaption">Fig. 1: “Consistently irregular” Intra (key) frame placement on shot boundaries. Key frames are temporally aligned with shot boundaries for all&nbsp;encodes</figcaption></figure></div></div></section><section name="c1f5" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="790b" id="790b" class="graf graf--h3 graf--leading">VMAF as a perceptual video quality&nbsp;metric</h3><p name="53f2" id="53f2" class="graf graf--p graf-after--h3">In another Netflix tech-blog [<a href="http://techblog.netflix.com/2016/06/toward-practical-perceptual-video.html" data-href="http://techblog.netflix.com/2016/06/toward-practical-perceptual-video.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">11</a>], published in June 2016, we explained the Video Multi-method Assessment Fusion (VMAF) quality metric, developed in-house and then open-sourced for the entire video community to benefit.</p><p name="b8b7" id="b8b7" class="graf graf--p graf-after--p">Key features of VMAF are the following:</p><ol class="postList"><li name="35a5" id="35a5" class="graf graf--li graf-after--p">It is a full-reference metric, which means it can be applied wherever the original, undistorted version of a video sequence is available, as well as a distorted one.</li><li name="d2fb" id="d2fb" class="graf graf--li graf-after--li">It takes into account both compression and up/down scaling artifacts, by upsampling decoded video frames to a common reference frame size (1920x1080). In this way, one can use VMAF to assess quality of encoded video at different resolutions. In particular, it can be used to compare encoded versions of the same title at different resolutions and help decide which one is better.</li><li name="5138" id="5138" class="graf graf--li graf-after--li">It relies on existing image quality metrics (VIF, DLM), properly modified to cover multiple scales of resolution, as well as the amount of motion between consecutive video frames in a video sequence as features that are input in a machine-learned set of weights. The final score is the result of combining these elementary features in a support vector machine (SVM) regressor.</li><li name="405b" id="405b" class="graf graf--li graf-after--li">Calibration and training of the weights used in VMAF has been performed by collecting subjective data from actual observers who provided the ground-truth data that VMAF was then fit against. The content used to train VMAF is a representative subset of the Netflix catalog, therefore it is understood that its performance has been tuned to our use-case. Yet, the VMAF framework is general and allows for others to retrain it for their own use-case. In fact, a large number of researchers have validated the accuracy of VMAF using their own subjective datasets.</li></ol><figure name="3fa7" id="3fa7" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 296px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.3%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*u8aDx4gr0BdHNMmr." data-width="1600" data-height="677" data-action="zoom" data-action-value="0*u8aDx4gr0BdHNMmr."><img src="0+u8adx4gr0bdhnmmr." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*u8aDx4gr0BdHNMmr."></div></div><figcaption class="imageCaption">Fig. 2: How VMAF works: pixel level data are pooled to create frame-level features; different spatial and temporal features are fused using SVM regression to create frame-level quality score; consecutive frame scores are pooled to produce final video sequence VMAF&nbsp;score</figcaption></figure></div></div></section><section name="791a" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2728" id="2728" class="graf graf--h3 graf--leading">Convex hull of Rate-Distortion curve</h3><p name="4488" id="4488" class="graf graf--p graf-after--h3">A seminal paper by Ortega and Ramchandran [<a href="#b3ac" data-href="#b3ac" class="markup--anchor markup--p-anchor">12</a>] in 1998 showed how to address optimality when dealing with multiple choices in image and video coding.</p><p name="14ea" id="14ea" class="graf graf--p graf-after--p">Assuming that an image consists of N units that need to be coded</p><ul class="postList"><li name="0226" id="0226" class="graf graf--li graf-after--p">You encode each unit separately, obtaining a (rate, distortion) pair for each possibility, called “operating point”</li><li name="3d20" id="3d20" class="graf graf--li graf-after--li">You place all available operating points on a rate-distortion graph</li><li name="e422" id="e422" class="graf graf--li graf-after--li">You extract its convex hull, the shell that outlines its boundary</li><li name="9f02" id="9f02" class="graf graf--li graf-after--li">You pick one point on the convex hull from each unit such that points from different units have (roughly) equal distortion-rate slope.</li></ul><figure name="7eec" id="7eec" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 546px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 78.1%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*flkD5gF1o8chYhOx." data-width="1563" data-height="1220" data-action="zoom" data-action-value="0*flkD5gF1o8chYhOx."><img src="0+flkd5gf1o8chyhox." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*flkD5gF1o8chYhOx."></div></div><figcaption class="imageCaption">Fig. 3: Example of operational points and their R-D convex hull, together with source R-D curve. Reproduced from&nbsp;[<a href="#b3ac" data-href="#b3ac" class="markup--anchor markup--figure-anchor">12</a>]</figcaption></figure></div></div></section><section name="a8b6" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="6082" id="6082" class="graf graf--h3 graf--leading">Putting it&nbsp;together</h3><p name="0f03" id="0f03" class="graf graf--p graf-after--h3">One can thus consider the following system:</p><ul class="postList"><li name="9adb" id="9adb" class="graf graf--li graf-after--p">A long video sequence is split in shots</li></ul><figure name="7ec9" id="7ec9" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 167px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 23.8%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*HULfuAga708yj6Nt." data-width="1600" data-height="381" data-action="zoom" data-action-value="0*HULfuAga708yj6Nt."><img src="0+hulfuaga708yj6nt." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*HULfuAga708yj6Nt."></div></div><figcaption class="imageCaption">Fig. 4: Thumbnails from representative shots from “El Fuente” test sequence; this title consists of 96&nbsp;shots</figcaption></figure><ul class="postList"><li name="4138" id="4138" class="graf graf--li graf-after--figure">Each shot is encoded multiple times with different encoding parameters, such as resolutions and qualities (QPs)</li><li name="e37f" id="e37f" class="graf graf--li graf-after--li">Each encode is evaluated using VMAF, which together with its bitrate produces an (R,D) point. One can convert VMAF quality to distortion using different mappings; we tested against the following two, linearly and inversely proportional mappings, which give rise to different temporal aggregation strategies, discussed in the subsequent section</li></ul><figure name="dfa1" id="dfa1" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 56px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 8.1%;"></div><img class="graf-image" data-image-id="1*ML6X72Vk67jYbW-j7qnrlg.png" data-width="1240" data-height="100" data-action="zoom" data-action-value="1*ML6X72Vk67jYbW-j7qnrlg.png" src="1+ml6x72vk67jybw-j7qnrlg.png"></div></figure><figure name="ce1d" id="ce1d" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 56px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 8.1%;"></div><img class="graf-image" data-image-id="1*rsq0wRLx-18Mwaha8uzzyw.png" data-width="1240" data-height="100" data-action="zoom" data-action-value="1*rsq0wRLx-18Mwaha8uzzyw.png" src="1+rsq0wrlx-18mwaha8uzzyw.png"></div></figure><figure name="ad0e" id="ad0e" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 352px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.2%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*sT1XzhC6HvAo3GX0." data-width="1600" data-height="804" data-action="zoom" data-action-value="0*sT1XzhC6HvAo3GX0."><img src="0+st1xzhc6hvao3gx0." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*sT1XzhC6HvAo3GX0."></div></div><figcaption class="imageCaption">Fig. 5: Encoding a shot using a set of parameters, such as resolution and QP, and obtaining a single (R,D) point for&nbsp;it.</figcaption></figure><ul class="postList"><li name="c5cd" id="c5cd" class="graf graf--li graf-after--figure">The convex hull of (R,D) points for each shot is calculated. In the following example figures, distortion is inverse of (VMAF+1)</li></ul><figure name="8834" id="8834" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 465px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.5%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*JOxSte08VHgwYWBP." data-width="737" data-height="490" data-action="zoom" data-action-value="0*JOxSte08VHgwYWBP."><img src="0+joxste08vhgwywbp." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*JOxSte08VHgwYWBP."></div></div><figcaption class="imageCaption">Fig. 6: Multiple (R,D) points for a certain shot from “El Fuente”, obtained at various encoding resolutions and QPs using VP9&nbsp;(libvpx)</figcaption></figure><figure name="a1d4" id="a1d4" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 465px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.5%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*jr59SeCl-6iQskzZ." data-width="737" data-height="490" data-action="zoom" data-action-value="0*jr59SeCl-6iQskzZ."><img src="0+jr59secl-6iqskzz." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*jr59SeCl-6iQskzZ."></div></div><figcaption class="imageCaption">Fig. 7: Convex hull of (R, D) operating points for the same shot from “El Fuente” using VP9&nbsp;(libvpx)</figcaption></figure><ul class="postList"><li name="c0fa" id="c0fa" class="graf graf--li graf-after--figure">Points from the convex hull, one from each shot, are combined to create an encode for the entire video sequence by following the constant-slope principle and building end-to-end paths in a Trellis</li></ul><figure name="1c7a" id="1c7a" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 296px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.3%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*0kZzILLHvOacRXMZ." data-width="1600" data-height="677" data-action="zoom" data-action-value="0*0kZzILLHvOacRXMZ."><img src="0+0kzzillhvoacrxmz." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*0kZzILLHvOacRXMZ."></div></div><figcaption class="imageCaption">Fig. 8: Combining shot encodes to produce optimal encodes; example Trellis paths show fixed QP encoding, minimizing bitrate for a given average quality or maximizing quality for a given average bitrate. Selected shot encodes have approximately equal slope in (R,D)&nbsp;space.</figcaption></figure><ul class="postList"><li name="d6e1" id="d6e1" class="graf graf--li graf-after--figure">One produces as many aggregate encodes (final operating points) by varying the slope parameter of the R-D curve as necessary in order to cover a desired bitrate/quality range</li><li name="80f0" id="80f0" class="graf graf--li graf-after--li">Final result is a complete R-D or rate-quality (R-Q) curve for the entire video sequence</li></ul><figure name="1791" id="1791" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 405px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 57.9%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*5dpM9ZgG0LiQUmoy." data-width="1080" data-height="625" data-is-featured="true" data-action="zoom" data-action-value="0*5dpM9ZgG0LiQUmoy."><img src="0+5dpm9zgg0liqumoy." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*5dpM9ZgG0LiQUmoy."></div></div><figcaption class="imageCaption">Fig 9: Final R-Q curve obtained for the entire “El Fuente” video sequence. Baseline is the best possible fixed-QP encoding; dynamic optimizer reduces bitrate by an average of 30% in this&nbsp;case</figcaption></figure><p name="5440" id="5440" class="graf graf--p graf-after--figure graf--trailing">This complete system is called “Dynamic Optimizer” and the framework produces Netflix’s newest generation of encodes.</p></div></div></section><section name="4acd" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="c8ed" id="c8ed" class="graf graf--h3 graf--leading">Testing methodology — Results</h3><p name="6815" id="6815" class="graf graf--p graf-after--h3">10 representative titles from the Netflix catalog were selected and encoded using the VP9-libvpx video codec.</p><p name="e3a4" id="e3a4" class="graf graf--p graf-after--p">In terms of temporal aggregation, we have implemented various pooling methods, two of them corresponding to the quality-to-distortion mappings introduced earlier, i.e. linear and inversely proportional mapping. We refer to them as arithmetic mean average VMAF (LVMAF) and harmonic mean averaged VMAF (HVMAF).</p><figure name="9db8" id="9db8" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 68px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 9.7%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*uO0hoP2DoJDv7BFcrdBCog.png" data-width="1240" data-height="120" data-action="zoom" data-action-value="1*uO0hoP2DoJDv7BFcrdBCog.png"><img src="1+uo0hop2dojdv7bfcrdbcog.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*uO0hoP2DoJDv7BFcrdBCog.png"></div></div></figure><figure name="0e23" id="0e23" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 70px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 10%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*RXzXn012q91Xo0btuve5sg.png" data-width="1240" data-height="124" data-action="zoom" data-action-value="1*RXzXn012q91Xo0btuve5sg.png"><img src="1+rxzxn012q91xo0btuve5sg.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*RXzXn012q91Xo0btuve5sg.png"></div></div></figure><p name="a10b" id="a10b" class="graf graf--p graf-after--figure">These two methods, LVMAF and HVMAF temporal quality aggregation, produced very high quality encoded sequences — allowing for more aggressive or more conservative temporal quality fluctuations in the combined video sequence, respectively.</p><h4 name="03eb" id="03eb" class="graf graf--h4 graf-after--p">VP9 encoding&nbsp;recipe</h4><p name="d466" id="d466" class="graf graf--p graf-after--h4">Encoding parameters used in VP9-libvpx were taken from a previous study; its findings were presented at Netflix’s “Open house on royalty-free codecs” held in Oct. 2016. Based on that study, the best configuration to use is “fixed-QP, AQ-mode=0, CPU=0, best”, shown to produce highest quality both in terms of PSNR and VMAF quality metrics. We reproduce key results from that study in the Appendix.</p><p name="f86e" id="f86e" class="graf graf--p graf-after--p">We compared results obtained by the dynamic optimizer against the best possible fixed-QP VP9-libvpx encoding. The methodology followed and various parameters chosen for this experiment are summarized in the following table.</p><figure name="ff7d" id="ff7d" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 418px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 59.7%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*UsmQdmgAoCWKuFTLePn4_Q.png" data-width="1260" data-height="752" data-action="zoom" data-action-value="1*UsmQdmgAoCWKuFTLePn4_Q.png"><img src="1+usmqdmgaocwkuftlepn4_q.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*UsmQdmgAoCWKuFTLePn4_Q.png"></div></div><figcaption class="imageCaption">Table 1: Parameters used for Dynamic Optimizer Experiment 1</figcaption></figure><p name="3546" id="3546" class="graf graf--p graf-after--figure">The corresponding gains obtained by the dynamic optimizer, expressed both in terms of % bitrate savings at the same visual quality and in terms of improvement in HVMAF scores at the same average bitrate, are as follows:</p><figure name="fd1b" id="fd1b" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 544px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 77.8%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*btv0QuCvam-JWyoW7mYU4Q.png" data-width="1260" data-height="980" data-action="zoom" data-action-value="1*btv0QuCvam-JWyoW7mYU4Q.png"><img src="1+btv0qucvam-jwyow7myu4q.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*btv0QuCvam-JWyoW7mYU4Q.png"></div></div><figcaption class="imageCaption">Table 2: Experiment 1 Results. R-D performance comparison around 256kbps between dynamic optimizer and best possible fixed-QP encoding for 10 representative titles from the Netflix&nbsp;catalog.</figcaption></figure><p name="db09" id="db09" class="graf graf--p graf-after--figure">The result was an average bitrate savings of 17.1% over the best possible fixed-QP encoding of the entire video sequence when using HVMAF as quality metric. The improvement when using PSNR is even higher: 22.5% bitrate savings on average.</p><p name="33c1" id="33c1" class="graf graf--p graf-after--p">In this comparison, computational complexity remained constant between the baseline and dynamic optimizer results, since obtaining the convex hull of fixed-QP encodes for an entire sequence requires the same complexity as that for the dynamic optimizer. Thus, this represents a lower-bound on the amount of improvement introduced by the dynamic optimizer.</p><p name="d788" id="d788" class="graf graf--p graf-after--p graf--trailing">If we use a more common baseline, such as the 2-pass VBR configuration with CPU=1, good, AQ-mode=2 encoding recipe in VP9-libvpx, the improvement by the dynamic optimizer is much larger: over 50% bitrate savings on average, in terms of HVMAF. One needs to keep in mind, although, that computational complexity of the dynamic optimizer solution is much higher in that case.</p></div></div></section><section name="9183" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2493" id="2493" class="graf graf--h3 graf--leading">How good is it for other video&nbsp;codecs?</h3><p name="8701" id="8701" class="graf graf--p graf-after--h3">Based on what was presented earlier, one can immediately understand that there is nothing codec-specific in the dynamic optimizer framework. In order to confirm this, a set of shorter clips were encoded with H.264/AVC, HEVC and VP9-libvpx, with the following experimental set-up:</p><figure name="9256" id="9256" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 438px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 62.5%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*qsyv9PV5rV6ziStbu8m1jw.png" data-width="1260" data-height="788" data-action="zoom" data-action-value="1*qsyv9PV5rV6ziStbu8m1jw.png"><img src="1+qsyv9pv5rv6zistbu8m1jw.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*qsyv9PV5rV6ziStbu8m1jw.png"></div></div><figcaption class="imageCaption">Table 3: Parameters used for Dynamic Optimizer Experiment 2</figcaption></figure><figure name="04af" id="04af" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 433px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 61.8%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*LQdqkL3mxISKSEnQ." data-width="1320" data-height="816" data-action="zoom" data-action-value="0*LQdqkL3mxISKSEnQ."><img src="0+lqdqkl3mxisksenq." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*LQdqkL3mxISKSEnQ."></div></div><figcaption class="imageCaption">Fig. 10: Experiment 2 Results. BD-rate improvement by the dynamic optimizer over fixed-QP/CRF encoding for AVC-High (x264), VP9 (libvpx) and HEVC (x265) in terms of VMAF and&nbsp;PSNR.</figcaption></figure><figure name="6d62" id="6d62" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 144px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 20.6%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*hkOrE5HFFQnNDTqyd-QCRw.png" data-width="1260" data-height="260" data-action="zoom" data-action-value="1*hkOrE5HFFQnNDTqyd-QCRw.png"><img src="1+hkore5hffqnndtqyd-qcrw.png" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/1*hkOrE5HFFQnNDTqyd-QCRw.png"></div></div><figcaption class="imageCaption">Table 4: Experiment 2 Results. BD-rate improvement by the dynamic optimizer over fixed-QP/CRF encoding using different video codecs and quality&nbsp;metrics</figcaption></figure><p name="7014" id="7014" class="graf graf--p graf-after--figure graf--trailing">One can notice that the dynamic optimizer improves all three codecs by approximately 28–38%. Keep in mind that these improvements are not comparing performance between codecs but rather how each one of these codecs can be improved by using the dynamic optimizer framework. A more thorough comparison of state-of-the-art video codecs, using the dynamic optimizer as high-level encoding framework, will be published in the upcoming weeks.</p></div></div></section><section name="2223" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9f9e" id="9f9e" class="graf graf--h3 graf--leading">Dynamic optimizer summary</h3><p name="f3da" id="f3da" class="graf graf--p graf-after--h3">Dynamic optimizer is an optimization framework for video encoding. Its key features are the following:</p><ul class="postList"><li name="436a" id="436a" class="graf graf--li graf-after--p">Shot-based encoding</li><li name="41e4" id="41e4" class="graf graf--li graf-after--li">Multiple encoding at different resolutions and quality parameters</li><li name="90d9" id="90d9" class="graf graf--li graf-after--li">Perceptual assessment and tuning of quality by using VMAF as its core metric</li><li name="34cf" id="34cf" class="graf graf--li graf-after--li">Massively parallel processing, ideal for cloud-based video encoding software pipelines</li></ul><p name="4b17" id="4b17" class="graf graf--p graf-after--li">Its key advantages are the following:</p><ul class="postList"><li name="f51c" id="f51c" class="graf graf--li graf-after--p">It can be applied to any existing or future video codec, which qualifies it as a video encoding optimization framework</li><li name="e9ff" id="e9ff" class="graf graf--li graf-after--li">It can help future codec development by identifying “perceptually relevant” ranges of encoding resolutions and qualities (QPs) for each test video sequence, which can be used while developing and evaluating performance of new coding tools</li><li name="6c17" id="6c17" class="graf graf--li graf-after--li">It removes much of the rate-control factor in video codec implementations, thus allowing for much more fair comparisons of video codecs</li><li name="a59e" id="a59e" class="graf graf--li graf-after--li">It is orthogonal to improvements one can bring in the shot-encoding recipe, such as better I-B-P coding structure, spatially adaptive QP selection; any improvements performed at the shot level are additive to those brought by the dynamic optimizer</li><li name="ec17" id="ec17" class="graf graf--li graf-after--li">Its complexity can be scaled up or down, depending on the amount of compute resources, offering a trade-off between complexity and rate-distortion efficiency</li><li name="a658" id="a658" class="graf graf--li graf-after--li">It produces fully compliant bitstreams</li><li name="0545" id="0545" class="graf graf--li graf-after--li">It can be used with VMAF, PSNR or any other video quality metric.</li><li name="02a8" id="02a8" class="graf graf--li graf-after--li graf--trailing">It benefits both standalone bitstream creation, intended for downloading and offline consumption, as well as full bitrate ladder creation, used for adapting streaming</li></ul></div></div></section><section name="93e3" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="1bef" id="1bef" class="graf graf--h3 graf--leading">Cloud Implementation</h3><p name="55df" id="55df" class="graf graf--p graf-after--h3 graf--trailing">We’ve implemented the dynamic optimizer framework in our encoding pipeline, leveraging our scalable cloud infrastructure and under-utilized cloud instances during non-peak streaming hours [<a href="http://techblog.netflix.com/2015/09/creating-your-own-ec2-spot-market.html" data-href="http://techblog.netflix.com/2015/09/creating-your-own-ec2-spot-market.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">13</a>],[<a href="http://techblog.netflix.com/2015/11/creating-your-own-ec2-spot-market-part-2.html" data-href="http://techblog.netflix.com/2015/11/creating-your-own-ec2-spot-market-part-2.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">14</a>]. We’ve applied this encoding system to AVC-High and VP9 streams, improving our members’ video quality as well as saving bandwidth. Stay tuned for another tech blog describing our implementation and results!</p></div></div></section><section name="f6c0" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="c8da" id="c8da" class="graf graf--h3 graf--leading">Acknowledgement</h3><p name="1281" id="1281" class="graf graf--p graf-after--h3 graf--trailing">This work is the collective result of the entire Video Algorithms team at Netflix. I would like to personally thank Anne Aaron, Chao Chen, Jan De Cock, Rich Gerber, Liwei Guo, Zhi Li, Megha Manohara, Aditya Mavlankar, Anush Moorthy, Andrey Norkin, Kyle Swanson and David Ronca for all their contributions.</p></div></div></section><section name="25c9" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="78f9" id="78f9" class="graf graf--h3 graf--leading">References</h3><p name="1846" id="1846" class="graf graf--p graf-after--h3">[1] ISO/IEC 11172–2:1993 “Information technology — Coding of moving pictures and associated audio for digital storage media at up to about 1,5 Mbit/s — Part 2: Video”</p><p name="cf4f" id="cf4f" class="graf graf--p graf-after--p">[2] ISO/IEC 23008–2:2013 “Information technology — High efficiency coding and media delivery in heterogeneous environments — Part 2: Video”</p><p name="6d1a" id="6d1a" class="graf graf--p graf-after--p">[3] ISO/IEC 14496–10:2014 “Information technology — Coding of audio-visual object — Part 10: Advanced Video Coding”</p><p name="8836" id="8836" class="graf graf--p graf-after--p">[4] ISO/IEC 13818–2:2013 “Information technology — Generic coding of moving pictures and associated audio information — Part 2: Video”</p><p name="d0f2" id="d0f2" class="graf graf--p graf-after--p">[5] J. De Cock, A. Mavlankar, A. Moorthy and A. Aaron, “A large-scale video codec comparison of x264, x265 and libvpx for practical VOD applications”, Proc. of the SPIE 9971, Applications of Digital Image Processing XXXIX, 997116 (27 Sep. 2016)</p><p name="698b" id="698b" class="graf graf--p graf-after--p">[6] A. Grange, P. de Rivaz, and J. Hunt, “VP9 Bitstream and Decoding Process Specification”, Google, 2016</p><p name="f324" id="f324" class="graf graf--p graf-after--p">[7] “Adaptive bitrate streaming”, Wikipedia — The Free Encyclopedia, <a href="https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming" data-href="https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">https://en.wikipedia.org/wiki/Adaptive_bitrate_streaming</a></p><p name="e845" id="e845" class="graf graf--p graf-after--p">[8] A. Aaron and D. Ronca, “High quality video encoding at scale,” The NETFLIX tech blog, Dec. 9, 2015, link: <a href="http://techblog.netflix.com/2015/12/high-quality-video-encoding-at-scale.html" data-href="http://techblog.netflix.com/2015/12/high-quality-video-encoding-at-scale.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">http://techblog.netflix.com/2015/12/high-quality-video-encoding-at-scale.html</a></p><p name="ef2f" id="ef2f" class="graf graf--p graf-after--p">[9] A. Aaron, Z. Li, M. Manohara, J. De Cock and D. Ronca, “Per-title encode optimization”, The NETFLIX tech blog, Dec. 14, 2015, link: <a href="http://techblog.netflix.com/2015/12/per-title-encode-optimization.html" data-href="http://techblog.netflix.com/2015/12/per-title-encode-optimization.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">http://techblog.netflix.com/2015/12/per-title-encode-optimization.html</a></p><p name="2c28" id="2c28" class="graf graf--p graf-after--p">[10] A. Norkin, J. De Cock, A. Mavlankar and A. Aaron, “More Efficient Mobile Encodes for Netflix Downloads”, The NETFLIX tech blog, Dec. 1, 2016, link: <a href="https://medium.com/netflix-techblog/more-efficient-mobile-encodes-for-netflix-downloads-625d7b082909" data-href="https://medium.com/netflix-techblog/more-efficient-mobile-encodes-for-netflix-downloads-625d7b082909" class="markup--anchor markup--p-anchor" target="_top">https://medium.com/netflix-techblog/more-efficient-mobile-encodes-for-netflix-downloads-625d7b082909</a></p><p name="7c16" id="7c16" class="graf graf--p graf-after--p">[11] Z. Li, A. Aaron, I. Katsavounidis, A. Moorthy, and M. Manohara, “Toward a practical perceptual video quality metric,” The NETFLIX tech blog, June 5, 2016, link: <a href="http://techblog.netflix.com/2016/06/toward-practical-perceptual-video.html" data-href="http://techblog.netflix.com/2016/06/toward-practical-perceptual-video.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">http://techblog.netflix.com/2016/06/toward-practical-perceptual-video.html</a></p><p name="b3ac" id="b3ac" class="graf graf--p graf-after--p">[12] A. Ortega and K. Ramchandran, “Rate-distortion methods for image and video compression: An overview,” <em class="markup--em markup--p-em">IEEE Signal Processing Magazine</em>, vol. 15, no. 6, pp. 23–50, 1998</p><p name="803f" id="803f" class="graf graf--p graf-after--p">[13] A. Park, D. Derlinger and C. Watson “Creating your own EC2 spot market,” The NETFLIX tech blog, Sep. 28, 2015, link: <a href="http://techblog.netflix.com/2015/09/creating-your-own-ec2-spot-market.html" data-href="http://techblog.netflix.com/2015/09/creating-your-own-ec2-spot-market.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">http://techblog.netflix.com/2015/09/creating-your-own-ec2-spot-market.html</a></p><p name="9c8b" id="9c8b" class="graf graf--p graf-after--p graf--trailing">[14] R. Wong, D. Derlinger, A. Shiroor, N. Mareddy, F. San Miguel, R. Gallardo and M. Prabhu “Creating your own EC2 spot market — part 2,” The NETFLIX tech blog, Nov. 23, 2015, link: <a href="http://techblog.netflix.com/2015/11/creating-your-own-ec2-spot-market-part-2.html" data-href="http://techblog.netflix.com/2015/11/creating-your-own-ec2-spot-market-part-2.html" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_top">http://techblog.netflix.com/2015/11/creating-your-own-ec2-spot-market-part-2.html</a></p></div></div></section><section name="b819" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4efe" id="4efe" class="graf graf--h3 graf--leading">Appendix: VP9 recipe&nbsp;testing</h3><p name="b535" id="b535" class="graf graf--p graf-after--h3">Encoding parameters used in VP9-libvpx were taken from a previous study; its findings were presented at Netflix’s “Open house on royalty-free codecs” in Oct. 2016. Based on that study, which used the same set of 10 full-titles for testing as those chosen for the first experiment reported earlier, the best configuration to use is “fixed-QP, AQ-mode=0, CPU=0, best”, shown to produce highest quality both in terms of PSNR and VMAF quality metrics. The following figures show the effect in terms of average BD-rate loss when choosing different parameters in VP9-libvpx encoding.</p><figure name="063e" id="063e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 351px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.2%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*ObO7IW8FeMHP0IwY." data-width="1309" data-height="657" data-action="zoom" data-action-value="0*ObO7IW8FeMHP0IwY."><img src="0+obo7iw8femhp0iwy." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*ObO7IW8FeMHP0IwY."></div></div><figcaption class="imageCaption">Fig. 11: Effect of AQ-mode=0/1/2 in VP9-libvpx encoding; AQ-mode=0 yields better results in all metrics (from Oct. 2016 presentation on “VP9 Encoding Opportunities @ Netflix”, part of Netflix’s “Open House on Royalty Free&nbsp;Codecs”)</figcaption></figure><figure name="bba9" id="bba9" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 359px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 51.3%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*-E6SqLvOkShjVD-T." data-width="1284" data-height="659" data-action="zoom" data-action-value="0*-E6SqLvOkShjVD-T."><img src="0+-e6sqlvokshjvd-t." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*-E6SqLvOkShjVD-T."></div></div><figcaption class="imageCaption">Fig. 12: Effect of CPU0/best in VP9-libvpx encoding; CPU0/best is the slowest, but provides consistently better results than other settings (from Oct. 2016 presentation on “VP9 Encoding Opportunities @ Netflix”, part of Netflix “Open House on Royalty Free&nbsp;Codecs”)</figcaption></figure><figure name="748f" id="748f" class="graf graf--figure graf-after--figure graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 365px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 52.2%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="0*NvttqTloA6CirYxA." data-width="1263" data-height="659" data-action="zoom" data-action-value="0*NvttqTloA6CirYxA."><img src="0+nvttqtloa6ciryxa." crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1600/0*NvttqTloA6CirYxA."></div></div><figcaption class="imageCaption">Fig. 13: BD-rate loss of 2-pass VBR over fixed-QP encoding in VP9-libvpx (from Oct. 2016 presentation on “VP9 Encoding Opportunities @ Netflix”, part of Netflix’s “Open House on Royalty Free&nbsp;Codecs”)</figcaption></figure></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link" href="https://medium.com/tag/video-encoding?source=post" data-action-source="post">Video Encoding</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/optimization-algorithms?source=post" data-action-source="post">Optimization Algorithms</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/video-quality?source=post" data-action-source="post">Video Quality</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/netflix?source=post" data-action-source="post">Netflix</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/streaming?source=post" data-action-source="post">Streaming</a></li></ul></div></div></div><div class="postActions js-postActionsFooter "><div class="u-flexCenter"><div class="u-flex1"><div class="multirecommend js-actionMultirecommend u-flexCenter u-width60" data-post-id="e19f1e3a277f" data-is-icon-29px="true" data-is-circle="true" data-has-recommend-list="true" data-source="post_actions_footer-----e19f1e3a277f---------------------clap_footer"><div class="u-relative u-foreground"><button class="button button--large button--circle button--withChrome u-baseColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--largePill u-relative u-foreground u-xs-paddingLeft13 u-width60 u-height60 u-accentColor--textNormal u-accentColor--buttonNormal clap-onboardingcollection" data-action="sign-up-prompt" data-sign-in-action="multivote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/e19f1e3a277f" data-action-source="post_actions_footer-----e19f1e3a277f---------------------clap_footer" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33"><path d="M28.86 17.342l-3.64-6.402c-.292-.433-.712-.729-1.163-.8a1.124 1.124 0 0 0-.889.213c-.63.488-.742 1.181-.33 2.061l1.222 2.587 1.4 2.46c2.234 4.085 1.511 8.007-2.145 11.663-.26.26-.526.49-.797.707 1.42-.084 2.881-.683 4.292-2.094 3.822-3.823 3.565-7.876 2.05-10.395zm-6.252 11.075c3.352-3.35 3.998-6.775 1.978-10.469l-3.378-5.945c-.292-.432-.712-.728-1.163-.8a1.122 1.122 0 0 0-.89.213c-.63.49-.742 1.182-.33 2.061l1.72 3.638a.502.502 0 0 1-.806.568l-8.91-8.91a1.335 1.335 0 0 0-1.887 1.886l5.292 5.292a.5.5 0 0 1-.707.707l-5.292-5.292-1.492-1.492c-.503-.503-1.382-.505-1.887 0a1.337 1.337 0 0 0 0 1.886l1.493 1.492 5.292 5.292a.499.499 0 0 1-.353.854.5.5 0 0 1-.354-.147L5.642 13.96a1.338 1.338 0 0 0-1.887 0 1.338 1.338 0 0 0 0 1.887l2.23 2.228 3.322 3.324a.499.499 0 0 1-.353.853.502.502 0 0 1-.354-.146l-3.323-3.324a1.333 1.333 0 0 0-1.886 0 1.325 1.325 0 0 0-.39.943c0 .356.138.691.39.943l6.396 6.397c3.528 3.53 8.86 5.313 12.821 1.353zM12.73 9.26l5.68 5.68-.49-1.037c-.518-1.107-.426-2.13.224-2.89l-3.303-3.304a1.337 1.337 0 0 0-1.886 0 1.326 1.326 0 0 0-.39.944c0 .217.067.42.165.607zm14.787 19.184c-1.599 1.6-3.417 2.392-5.353 2.392-.349 0-.7-.03-1.058-.082a7.922 7.922 0 0 1-3.667.887c-3.049 0-6.115-1.626-8.359-3.87l-6.396-6.397A2.315 2.315 0 0 1 2 19.724a2.327 2.327 0 0 1 1.923-2.296l-.875-.875a2.339 2.339 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.647l-.139-.139c-.91-.91-.91-2.39 0-3.3.884-.884 2.421-.882 3.301 0l.138.14a2.335 2.335 0 0 1 3.948-1.24l.093.092c.091-.423.291-.828.62-1.157a2.336 2.336 0 0 1 3.3 0l3.384 3.386a2.167 2.167 0 0 1 1.271-.173c.534.086 1.03.354 1.441.765.11-.549.415-1.034.911-1.418a2.12 2.12 0 0 1 1.661-.41c.727.117 1.385.565 1.853 1.262l3.652 6.423c1.704 2.832 2.025 7.377-2.205 11.607zM13.217.484l-1.917.882 2.37 2.837-.454-3.719zm8.487.877l-1.928-.86-.44 3.697 2.368-2.837zM16.5 3.293L15.478-.005h2.044L16.5 3.293z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33"><g fill-rule="evenodd"><path d="M29.58 17.1l-3.854-6.78c-.365-.543-.876-.899-1.431-.989a1.491 1.491 0 0 0-1.16.281c-.42.327-.65.736-.7 1.207v.001l3.623 6.367c2.46 4.498 1.67 8.802-2.333 12.807-.265.265-.536.505-.81.728 1.973-.222 3.474-1.286 4.45-2.263 4.166-4.165 3.875-8.6 2.215-11.36zm-4.831.82l-3.581-6.3c-.296-.439-.725-.742-1.183-.815a1.105 1.105 0 0 0-.89.213c-.647.502-.755 1.188-.33 2.098l1.825 3.858a.601.601 0 0 1-.197.747.596.596 0 0 1-.77-.067L10.178 8.21c-.508-.506-1.393-.506-1.901 0a1.335 1.335 0 0 0-.393.95c0 .36.139.698.393.95v.001l5.61 5.61a.599.599 0 1 1-.848.847l-5.606-5.606c-.001 0-.002 0-.003-.002L5.848 9.375a1.349 1.349 0 0 0-1.902 0 1.348 1.348 0 0 0 0 1.901l1.582 1.582 5.61 5.61a.6.6 0 0 1-.848.848l-5.61-5.61c-.51-.508-1.393-.508-1.9 0a1.332 1.332 0 0 0-.394.95c0 .36.139.697.393.952l2.363 2.362c.002.001.002.002.002.003l3.52 3.52a.6.6 0 0 1-.848.847l-3.522-3.523h-.001a1.336 1.336 0 0 0-.95-.393 1.345 1.345 0 0 0-.949 2.295l6.779 6.78c3.715 3.713 9.327 5.598 13.49 1.434 3.527-3.528 4.21-7.13 2.086-11.015zM11.817 7.727c.06-.328.213-.64.466-.893.64-.64 1.755-.64 2.396 0l3.232 3.232c-.82.783-1.09 1.833-.764 2.992l-5.33-5.33z"></path><path d="M13.285.48l-1.916.881 2.37 2.837z"></path><path d="M21.719 1.361L19.79.501l-.44 3.697z"></path><path d="M16.502 3.298L15.481 0h2.043z"></path></g></svg></span></span></button><div class="clapUndo u-width60 u-round u-height32 u-absolute u-borderBox u-paddingRight5 u-transition--transform200Spring u-background--brandSageLighter js-clapUndo" style="top: 14px; padding: 2px;"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-floatRight" data-action="multivote-undo" data-action-value="e19f1e3a277f"><span class="svgIcon svgIcon--removeThin svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61" fill-rule="evenodd"></path></svg></span></button></div></div><span class="u-textAlignCenter u-relative u-background js-actionMultirecommendCount u-marginLeft10"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton" data-action="show-recommends" data-action-value="e19f1e3a277f">871</button></span></div></div><div class="buttonSet u-flex0"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" data-action="scroll-to-responses" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"></path></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal" data-action="scroll-to-responses">5</button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-hide" title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"></path></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-hide" title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"></path></svg></span></button><button class="button button--large button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-show" title="Share this story on Twitter or Facebook" aria-label="Share this story on Twitter or Facebook" data-action="show-share-popover" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--share svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M20.385 8H19a.5.5 0 1 0 .011 1h1.39c.43 0 .84.168 1.14.473.31.305.48.71.48 1.142v10.77c0 .43-.17.837-.47 1.142-.3.305-.71.473-1.14.473H8.62c-.43 0-.84-.168-1.144-.473a1.603 1.603 0 0 1-.473-1.142v-10.77c0-.43.17-.837.48-1.142A1.599 1.599 0 0 1 8.62 9H10a.502.502 0 0 0 0-1H8.615c-.67 0-1.338.255-1.85.766-.51.51-.765 1.18-.765 1.85v10.77c0 .668.255 1.337.766 1.848.51.51 1.18.766 1.85.766h11.77c.668 0 1.337-.255 1.848-.766.51-.51.766-1.18.766-1.85v-10.77c0-.668-.255-1.337-.766-1.848A2.61 2.61 0 0 0 20.384 8zm-8.67-2.508L14 3.207v8.362c0 .27.224.5.5.5s.5-.23.5-.5V3.2l2.285 2.285a.49.49 0 0 0 .704-.001.511.511 0 0 0 0-.708l-3.14-3.14a.504.504 0 0 0-.71 0L11 4.776a.501.501 0 0 0 .71.706" fill-rule="evenodd"></path></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon js-moreActionsButton" title="More actions" aria-label="More actions" data-action="more-actions"><span class="svgIcon svgIcon--more svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="-480.5 272.5 21 21"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"></path></svg></span></button></div></div></div></div><div class="u-maxWidth740 u-paddingTop20 u-marginTop20 u-borderTopLightest container u-paddingBottom20 u-xs-paddingBottom10 js-postAttributionFooterContainer"><div class="row js-postFooterInfo"><div class="col u-size6of12 u-xs-size12of12"><li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState" data-user-id="c3aeaf49d8a4"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton" data-action="sign-up-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-redirect="https://medium.com/netflix-techblog/dynamic-optimizer-a-perceptual-video-encoding-optimization-framework-e19f1e3a277f" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton" data-action="sign-up-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/c3aeaf49d8a4" data-action-source="footer_card-c3aeaf49d8a4-------------------------follow_footer"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell"><a class="link u-baseColor--link avatar" href="https://medium.com/@NetflixTechBlog?source=footer_card" title="Go to the profile of Netflix Technology Blog" aria-label="Go to the profile of Netflix Technology Blog" data-action-source="footer_card" data-user-id="c3aeaf49d8a4" dir="auto"><img src="1+ty4nvnrgg4reetxqu2n3og.png" class="avatar-image avatar-image--small" alt="Go to the profile of Netflix Technology Blog"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="ui-h3 u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal" href="https://medium.com/@NetflixTechBlog" property="cc:attributionName" title="Go to the profile of Netflix Technology Blog" aria-label="Go to the profile of Netflix Technology Blog" rel="author cc:attributionUrl" data-user-id="c3aeaf49d8a4" dir="auto">Netflix Technology Blog</a></h3><p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Learn more about how Netflix designs, builds, and operates our systems and engineering organizations</p></div></li></div><div class="col u-size6of12 u-xs-size12of12 u-xs-marginTop30"><li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardCollection"><div class="u-marginLeft20 u-floatRight"><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton" data-action="sign-up-prompt" data-sign-in-action="toggle-follow-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/netflix-techblog" data-action-source="----2615bd06b42e----------------------follow_footer" data-collection-id="2615bd06b42e"><span class="button-label  js-buttonLabel">Follow</span></button></div><div class="u-tableCell "><a class="link u-baseColor--link avatar avatar--roundedRectangle" href="https://medium.com/netflix-techblog?source=footer_card" title="Go to Netflix TechBlog" aria-label="Go to Netflix TechBlog" data-action-source="footer_card"><img src="1+ty4nvnrgg4reetxqu2n3og.png" class="avatar-image u-size60x60" alt="Netflix TechBlog"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="ui-h3 u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal" href="https://medium.com/netflix-techblog?source=footer_card" rel="collection" data-action-source="footer_card">Netflix TechBlog</a></h3><p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Learn about Netflix’s world class engineering efforts, company culture, product developments and more.</p><div class="buttonSet"></div></div></li></div></div></div><div class="js-postFooterPlacements"></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper"></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main><aside class="u-marginAuto u-maxWidth1000 js-postLeftSidebar"><div class="u-foreground u-top0 u-transition--fadeOut300 u-fixed u-sm-hide u-marginLeftNegative12 js-postShareWidget"><ul><li class="u-marginVertical10 u-textAlignCenter"><div class="multirecommend js-actionMultirecommend u-flexColumn u-marginBottom10 u-width60" data-post-id="e19f1e3a277f" data-is-icon-29px="true" data-is-vertical="true" data-is-circle="true" data-has-recommend-list="true" data-source="post_share_widget-----e19f1e3a277f---------------------clap_sidebar"><div class="u-relative u-foreground"><button class="button button--large button--circle button--withChrome u-baseColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--largePill u-relative u-foreground u-xs-paddingLeft13 u-width60 u-height60 u-accentColor--textNormal u-accentColor--buttonNormal" data-action="sign-up-prompt" data-sign-in-action="multivote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/e19f1e3a277f" data-action-source="post_share_widget-----e19f1e3a277f---------------------clap_sidebar" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33"><path d="M28.86 17.342l-3.64-6.402c-.292-.433-.712-.729-1.163-.8a1.124 1.124 0 0 0-.889.213c-.63.488-.742 1.181-.33 2.061l1.222 2.587 1.4 2.46c2.234 4.085 1.511 8.007-2.145 11.663-.26.26-.526.49-.797.707 1.42-.084 2.881-.683 4.292-2.094 3.822-3.823 3.565-7.876 2.05-10.395zm-6.252 11.075c3.352-3.35 3.998-6.775 1.978-10.469l-3.378-5.945c-.292-.432-.712-.728-1.163-.8a1.122 1.122 0 0 0-.89.213c-.63.49-.742 1.182-.33 2.061l1.72 3.638a.502.502 0 0 1-.806.568l-8.91-8.91a1.335 1.335 0 0 0-1.887 1.886l5.292 5.292a.5.5 0 0 1-.707.707l-5.292-5.292-1.492-1.492c-.503-.503-1.382-.505-1.887 0a1.337 1.337 0 0 0 0 1.886l1.493 1.492 5.292 5.292a.499.499 0 0 1-.353.854.5.5 0 0 1-.354-.147L5.642 13.96a1.338 1.338 0 0 0-1.887 0 1.338 1.338 0 0 0 0 1.887l2.23 2.228 3.322 3.324a.499.499 0 0 1-.353.853.502.502 0 0 1-.354-.146l-3.323-3.324a1.333 1.333 0 0 0-1.886 0 1.325 1.325 0 0 0-.39.943c0 .356.138.691.39.943l6.396 6.397c3.528 3.53 8.86 5.313 12.821 1.353zM12.73 9.26l5.68 5.68-.49-1.037c-.518-1.107-.426-2.13.224-2.89l-3.303-3.304a1.337 1.337 0 0 0-1.886 0 1.326 1.326 0 0 0-.39.944c0 .217.067.42.165.607zm14.787 19.184c-1.599 1.6-3.417 2.392-5.353 2.392-.349 0-.7-.03-1.058-.082a7.922 7.922 0 0 1-3.667.887c-3.049 0-6.115-1.626-8.359-3.87l-6.396-6.397A2.315 2.315 0 0 1 2 19.724a2.327 2.327 0 0 1 1.923-2.296l-.875-.875a2.339 2.339 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.647l-.139-.139c-.91-.91-.91-2.39 0-3.3.884-.884 2.421-.882 3.301 0l.138.14a2.335 2.335 0 0 1 3.948-1.24l.093.092c.091-.423.291-.828.62-1.157a2.336 2.336 0 0 1 3.3 0l3.384 3.386a2.167 2.167 0 0 1 1.271-.173c.534.086 1.03.354 1.441.765.11-.549.415-1.034.911-1.418a2.12 2.12 0 0 1 1.661-.41c.727.117 1.385.565 1.853 1.262l3.652 6.423c1.704 2.832 2.025 7.377-2.205 11.607zM13.217.484l-1.917.882 2.37 2.837-.454-3.719zm8.487.877l-1.928-.86-.44 3.697 2.368-2.837zM16.5 3.293L15.478-.005h2.044L16.5 3.293z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33"><g fill-rule="evenodd"><path d="M29.58 17.1l-3.854-6.78c-.365-.543-.876-.899-1.431-.989a1.491 1.491 0 0 0-1.16.281c-.42.327-.65.736-.7 1.207v.001l3.623 6.367c2.46 4.498 1.67 8.802-2.333 12.807-.265.265-.536.505-.81.728 1.973-.222 3.474-1.286 4.45-2.263 4.166-4.165 3.875-8.6 2.215-11.36zm-4.831.82l-3.581-6.3c-.296-.439-.725-.742-1.183-.815a1.105 1.105 0 0 0-.89.213c-.647.502-.755 1.188-.33 2.098l1.825 3.858a.601.601 0 0 1-.197.747.596.596 0 0 1-.77-.067L10.178 8.21c-.508-.506-1.393-.506-1.901 0a1.335 1.335 0 0 0-.393.95c0 .36.139.698.393.95v.001l5.61 5.61a.599.599 0 1 1-.848.847l-5.606-5.606c-.001 0-.002 0-.003-.002L5.848 9.375a1.349 1.349 0 0 0-1.902 0 1.348 1.348 0 0 0 0 1.901l1.582 1.582 5.61 5.61a.6.6 0 0 1-.848.848l-5.61-5.61c-.51-.508-1.393-.508-1.9 0a1.332 1.332 0 0 0-.394.95c0 .36.139.697.393.952l2.363 2.362c.002.001.002.002.002.003l3.52 3.52a.6.6 0 0 1-.848.847l-3.522-3.523h-.001a1.336 1.336 0 0 0-.95-.393 1.345 1.345 0 0 0-.949 2.295l6.779 6.78c3.715 3.713 9.327 5.598 13.49 1.434 3.527-3.528 4.21-7.13 2.086-11.015zM11.817 7.727c.06-.328.213-.64.466-.893.64-.64 1.755-.64 2.396 0l3.232 3.232c-.82.783-1.09 1.833-.764 2.992l-5.33-5.33z"></path><path d="M13.285.48l-1.916.881 2.37 2.837z"></path><path d="M21.719 1.361L19.79.501l-.44 3.697z"></path><path d="M16.502 3.298L15.481 0h2.043z"></path></g></svg></span></span></button><div class="clapUndo u-width60 u-round u-height32 u-absolute u-borderBox u-paddingRight5 u-transition--transform200Spring u-background--brandSageLighter js-clapUndo" style="top: 14px; padding: 2px;"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-floatRight" data-action="multivote-undo" data-action-value="e19f1e3a277f"><span class="svgIcon svgIcon--removeThin svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61" fill-rule="evenodd"></path></svg></span></button></div></div><span class="u-textAlignCenter u-relative u-background js-actionMultirecommendCount u-flexOrderNegative1 u-height20 u-marginBottom7"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-block u-marginAuto" data-action="show-recommends" data-action-value="e19f1e3a277f">871</button></span></div></li><li class="u-marginVertical10 u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_share_widget"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"></path></svg></span></button></li><li class="u-marginVertical10 u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_share_widget"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"></path></svg></span></button></li><li class="u-marginVertical10 u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-up-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/e19f1e3a277f" data-action-source="post_share_widget-----e19f1e3a277f---------------------bookmark_sidebar"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"></path></svg></span></span></button></li></ul></div></aside><div class="u-fixed u-bottom0 u-width100pct u-backgroundWhite u-boxShadowTop u-borderBox u-paddingTop10 u-paddingBottom10 u-zIndexMetabar u-xs-paddingLeft10 u-xs-paddingRight10 js-stickyFooter"><div class="u-maxWidth700 u-marginAuto u-flexCenter"><div class="u-fontSize16 u-flex1 u-flexCenter"><div class="u-flex0 u-inlineBlock u-paddingRight20 u-xs-paddingRight10"><a class="link u-baseColor--link avatar avatar--roundedRectangle" href="https://medium.com/netflix-techblog" title="Go to Netflix TechBlog" aria-label="Go to Netflix TechBlog"><img src="1+ty4nvnrgg4reetxqu2n3og_001.png" class="avatar-image avatar-image--smaller" alt="Netflix TechBlog"></a></div><div class="u-flex1 u-inlineBlock"><div class="u-xs-hide">Never miss a story from<strong> Netflix TechBlog</strong>, when you sign up for Medium. <a class="link u-baseColor--link link--accent u-accentColor--textNormal u-accentColor--textDarken" href="https://medium.com/@Medium/personalize-your-medium-experience-with-users-publications-tags-26a41ab1ee0c#.hx4zuv3mg" data-action-source="sticky_footer">Learn more</a></div><div class="u-xs-show">Never miss a story from<strong> Netflix TechBlog</strong></div></div></div><div class="u-marginLeft50 u-xs-marginAuto"><button class="button button--primary button--dark is-active u-noUserSelect button--withChrome u-accentColor--buttonDark u-uiTextSemibold u-textUppercase u-fontSize12 button--followCollection js-followCollectionButton" data-action="sign-up-prompt" data-sign-in-action="toggle-subscribe-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/netflix-techblog" data-action-source="sticky_footer----2615bd06b42e----------------------follow_metabar"><span class="button-label  button-defaultState js-buttonLabel">Get updates</span><span class="button-label button-activeState">Get updates</span></button></div></div></div></div></div></div><div class="loadingBar"></div></body>
</html>
